2009-10-14  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py:
	* lib/wiking/handler.py:
	Export error documents using a minimalistic exporter rather than
	printing HTML directly.

	* doc/src/devel/devel-faq.en.txt:
	Improve the recent addition to be more precise.

	* lib/wiking/cms/appl.py:
	Improve the recent docstring addition to be more precise.

2009-10-14  Hynek Hanke  <hanke@kropacek>

	* lib/wiking/cms/appl.py (Application.module_uri): Docstring: Warn about consequence
	of point 1 for modules only accessible via binding.

2009-10-14  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: 
	Derive the default pytis data class used by Wiking modules from
	`DBAPIData' to avoid application of pytis access restrictions.

2009-10-13  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py: 
	* lib/wiking/cms/cms.py:
	Allow passing arbitrary session key to session initialization call.

	* lib/wiking/modules.py: 
	Don't use module's docstring as default description text.

2009-10-09  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py:
	Set default browse form limits to (50, 100, 200, 500) to avoid
	records-per-page selection in tables with 25-50 records.

2009-10-08  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/devel/overview.en.txt: 
	* lib/wiking/application.py: 
	* lib/wiking/request.py: 
	* lib/wiking/cms/appl.py: 
	Documentation improvements.

2009-10-07  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py:
	Improve discussion RSS item title.

2009-10-03  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking-cms.*.po: 
	Translations updated.

	* lib/wiking/cms/cms.py:
	* resources/css/default.css:
	Added a simple forum-like discussion module.

2009-10-02  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/appl.py: 
	Docstring added.

	* lib/wiking/application.py: 
	Docstring improved.

2009-10-01  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/appl.py:
	* lib/wiking/cms/cms.py:
	Make `Application.module_uri()' work also for embedded modules.	

	* lib/wiking/request.py:
	* lib/wiking/modules.py:
	* lib/wiking/application.py:
	Module URI construction documented.

2009-09-29  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: 
	Avoid using `pytis.presentation.Field.type()'.

2009-09-24  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py:
	Limit login dialog fields to 32 characters to prevent errors when
	writing weird login attempts into CMS session log.

2009-09-24  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/util.py:
	Don't crash on None iurl in RSS data building.

2009-09-22  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py:
	Changed order of filters in user management.

2009-09-21  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/__init__.py:
	Version changed to 0.4.5.
	
	* TODO:
	Updated.

	* NEWS:
	Updated.

	* lib/wiking/cms/cms.py:
	Bulk e-mails moved to WMI section Users.

	* translations/wiking.*.po: 
	Translations updated.

2009-09-18  Hynek Hanke  <hanke@kropacek>

	* lib/wiking/cms/cms.py: New comments for translators.

2009-09-17  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py:
	RSS specifications modified according to the recent change in db.py.

2009-09-14  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: 
	* lib/wiking/db.py:
	Allow easy RSS export customizations and perform XML escaping at
	the appropriate level.

2009-09-08  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Improved styles for radio buttons in
	pytis forms.

2009-09-07  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py:
	Move actual AJAX request processing to pytis.

2009-09-07  Hynek Hanke  <hanke@kropacek>

	* lib/wiking/configuration.py: New comments for translators.

2009-09-06  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/configuration.py:
	Define `password_storage' as string option.

2009-09-02  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/__init__.py: 
	Version changed to 0.4.5-pre7.

	* lib/wiking/cms/cms.py:
	Missleading terminology fixed.
	`Users.send_mail()' docstring clarified.

2009-09-02  Milan Zamazal  <pdm@brailcom.org>

	* sql/wiking.sql:
	Add missing column `ord' to `stylesheets' db table.

2009-09-01  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking-cms.cs.po:
	* translations/wiking.cs.po:
	Translations updated.

	* lib/wiking/application.py:
	* lib/wiking/db.py:
	* lib/wiking/handler.py:
	* lib/wiking/util.py:
	Detect `DBSystemException' in top level exception handling
	routines and present a generic error message in such situations.

	* lib/wiking/application.py:
	* lib/wiking/util.py:
	* lib/wiking/cms/appl.py:
	* lib/wiking/cms/cms.py: 
	* resources/css/default.css:
	* resources/css/layout.css:
	* resources/css/print.css:
	* sql/init.sql:
	* sql/upgrade.12.sql:
	* sql/wiking.sql:
	Added support for media specific style sheets and style sheet
	order management.

	* lib/wiking/cms/cms.py: 
	Enlarge password reminder form field.

2009-08-29  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py: 
	Fix broken profile page action buttons.

2009-08-28  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/appl.py:
	* lib/wiking/cms/configuration.py:
	New CMS specific config option `sql_dir'.

2009-08-19  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/db.py:
	Fix typo in PytisModule._inaccessible_database.

2009-08-19  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py:
	Removed forgotten initialization.

	* lib/wiking/cms/cms.py:
	Allow handling subpath within the registration module.

2009-08-17  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/__init__.py: 
	Version changed to 0.4.5-pre6.

	* lib/wiking/cms/cms.py:
	Refer to activation code consistently (not as `registration code').
	Removed unused methods `Users.set_registration_code()' and
	`Users.delete_registration_code()'.
	
	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.it.po:
	* translations/wiking-cms.no.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	* translations/wiking.cs.po:
	* translations/wiking.de.po:
	* translations/wiking.es.po:
	* translations/wiking.fr.po:
	* translations/wiking.hu.po:
	* translations/wiking.it.po:
	* translations/wiking.no.po:
	* translations/wiking.pl.po:
	* translations/wiking.sk.po:
	Translations updated.
	
	* lib/wiking/application.py: 
	Set 'Reply-To' and 'X-Wiking-Bug-Report-From' headers of bug
	report emails.
	
	* lib/wiking/configuration.py: 
	New option `allow_smtp_email_validation'.

2009-08-14  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: 
	Don't prefill login and password in login dialog from request arguments.

2009-08-13  Tomas Cerha  <cerha@brailcom.org>

	* NEWS: 
	Updated.

	* lib/wiking/__init__.py: 
	Version set to 0.4.5-pre5.

2009-08-12  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py:
	* lib/wiking/cms/cms.py:
	Cleanup: Use `req.message()' instead of passing `msg' and `err' to
	the document.

	* translations/wiking-cms.cs.po:
	Drobná oprava.

	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.it.po:
	* translations/wiking-cms.no.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	Translations updated.

	* lib/wiking/cms/cms.py: 
	Improved wording: "Security code" -> "Activation code".

2009-08-11  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.it.po:
	* translations/wiking-cms.no.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	* translations/wiking.cs.po:
	* translations/wiking.de.po:
	* translations/wiking.es.po:
	* translations/wiking.fr.po:
	* translations/wiking.hu.po:
	* translations/wiking.it.po:
	* translations/wiking.no.po:
	* translations/wiking.pl.po:
	* translations/wiking.sk.po:
	Translations updated.

	* resources/css/default.css: 
	* resources/images/error.png: 
	* resources/images/info.png: 
	* resources/images/warning.png: 
	* lib/wiking/cms/cms.py:
	Don't allow activation of unconfirmed account.  Use registration
	code confirmation even if cfg.login_is_email is not true.  Show
	detailed description of account state in user profile page.
	Registration feedback made more descriptive and other smaller
	improvements.

2009-08-10  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py: 
	Make sure `server_hostname()' never returns None.
	Prevent '..' directory traversal attacs globally.

	* lib/wiking/util.py: 
	Pass multivalue parameters correctly in the login dialog.

	* lib/wiking/cms/appl.py: 
	Avoid exception on empty request path (the mystery is how to
	invoke this...).

	* lib/wiking/application.py:
	Include also query parameter values in exception info.
	Log exceptions always (regardless whether it was sent by email or not).
	
2009-08-07  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/certificates.py: 
	* lib/wiking/cms/cms.py: 
	Simplify dynamic `_layout()' specifications and respect changes in `_validate()'.

	* lib/wiking/db.py: 
	Added support for AJAX form update request processing.

	* lib/wiking/configuration.py:
	Add pytis and lcg resource directories to the default resource
	search path.

2009-08-04  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/handler.py:
	Catch DBSystemException's in Handler._serve_document.

2009-08-04  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py:
	Log "File not found ..." on error in `serve_file()'.

2009-08-03  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/application.py: 
	* lib/wiking/configuration.py: 
	* lib/wiking/modules.py: 
	* lib/wiking/cms/appl.py:
	Added support for site icons.

	* lib/wiking/cms/appl.py: 
	Reflect error message change in pytis.data.

2009-07-23  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/application.py:
	* lib/wiking/configuration.py:
	* lib/wiking/db.py:
	* lib/wiking/modules.py:
	Allow application specific documentation to be handled by the
	default `Documentation' module.

	* lib/wiking/cms/cms.py:
	Allow maping a `CMSExtension' module directly.

2009-07-22  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py:
	Return `Forbidden' instead of `NotFound' when accessing
	documentation root directly.

2009-07-21  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py:
	Don't encode absolute URIs such as `http://...' or `mailto:...' links.

2009-07-20  Tomas Cerha  <cerha@brailcom.org>

	* translations/*.po: 
	Translations updated.	

	* lib/wiking/application.py: 
	* lib/wiking/db.py: 
	* lib/wiking/cms/cms.py: 
	* lib/wiking/cms/configuration.py: 
	Translation comments refined.

	* lib/wiking/util.py:
	Fix css recognition of login dialog error messages.

2009-07-20  Hynek Hanke  <hanke@kropacek>

	* lib/: Comments for translators added to all python sources.

	* lib/wiking/cms/cms.py (Themes.Spec): Typo. Misc now without trailing dot.

2009-07-18  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Make possible to use multiple Text and Email classes.

2009-07-17  Milan Zamazal  <pdm@brailcom.org>

	* bin/bulkmailer:
	Add DATABASE argument to bulkmailer.

2009-07-16  Milan Zamazal  <pdm@brailcom.org>

	* doc/src/devel/ui-design.en.txt:
	Minor typo fixes in docs.

2009-07-16  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.it.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	* translations/wiking.cs.po:
	* translations/wiking.de.po:
	* translations/wiking.es.po:
	* translations/wiking.fr.po:
	* translations/wiking.hu.po:
	* translations/wiking.it.po:
	* translations/wiking.no.po:
	* translations/wiking.pl.po:
	* translations/wiking.sk.po:
	Translations updated.
	
	* lib/wiking/util.py: 
	Improved confusing error messages.

2009-07-14  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/devel/ui-design.en.txt: 
	New section `Response After User Actions'.

	* doc/src/devel/_index.txt: 
	* doc/src/devel/ui-design.en.txt: 
	New documentation section `User Interface Design Guidlines'.

	* lib/wiking/application.py:
	* lib/wiking/export.py:
	* lib/wiking/request.py:
	* lib/wiking/cms/appl.py:
	* lib/wiking/cms/cms.py: 
	Pass `req' to `Application.module_uri()'.  Use
	`WikingRequest.module_uri()' instead of `Application.module_uri()'
	directly in application code.

2009-07-13  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/calendarview.css: 
	* resources/scripts/calendarview.js: 
	* resources/scripts/prototype.js: 
	Added support for dynamic calendar widget.

	* resources/css/default.css:
	Fixed input field style selectors.

2009-07-02  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: 
	Allow setting per-module BrowseForm limits.

	* Makefile: 
	* INSTALL: 
	CVS specific installation Makefile setup generalized.
	
2009-07-01  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py: 
	Avoid unsafe characters in CSS class/id names.

2009-06-30  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py:
	Automatically convert relative redirection URIs to absolute as
	required by HTTP protocol.

	* lib/wiking/cms/cms.py: 
	Redirect to the start page after logout from the user's profile page.

2009-06-26  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py:
	Allow dynamic (request based) color theme selection.

2009-06-26  Hynek Hanke  <hanke@brailcom.org>

	* sql/wiking.sql: Typo fixed.

	* sql/upgrade.11.sql: Typo fixed.

2009-06-26  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py: 
	Don't limit redirection to first subpage for empty pages to the
	first menu level. 

	* lib/wiking/request.py:
	Interpret setting request param value to None as removing the param.

2009-06-25  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py:
	Show login history also for each user separately.

2009-06-24  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.it.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	* translations/wiking.cs.po:
	* translations/wiking.de.po:
	* translations/wiking.es.po:
	* translations/wiking.fr.po:
	* translations/wiking.hu.po:
	* translations/wiking.it.po:
	* translations/wiking.pl.po:
	* translations/wiking.sk.po:
	Translations updated.
	
	* lib/wiking/modules.py: 
	* lib/wiking/cms/cms.py: 
	* sql/upgrade.11.sql: 
	* sql/wiking.sql: 
	Added session logging and session history view in WMI.

2009-06-23  Tomas Cerha  <cerha@brailcom.org>

	* resources/scripts/wiking.js: 
	ARIA menu roles disabled again.  

2009-06-19  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.cs.po: 
	* translations/wiking.de.po: 
	* translations/wiking.es.po: 
	* translations/wiking.fr.po: 
	* translations/wiking.hu.po: 
	* translations/wiking.it.po: 
	* translations/wiking.pl.po: 
	* translations/wiking.sk.po: 
	Translations updated.

	* lib/wiking/export.py:
	Add titles to all page elements used for ARIA landmarks.

	* TODO:
	Updated.

	* NEWS:
	Updated.

	* resources/scripts/wiking.js:
	Added support for ARIA landmarks.  
	ARIA menu roles re-enabled.  Make panel navigation consistent with
	menu navigation.

	* translations/wiking-cms.cs.po:
	Reverted last changes made from outdated source.

	* translations/wiking-cms.sk.po:
	Header fixed.
	
2009-06-18  Petr Topiarz  <cerha@brailcom.org>

	* translations/wiking-cms.cs.po: 
	* translations/wiking-cms.es.po: 
	* translations/wiking-cms.sk.po: 
	* translations/wiking.es.po: 
	* translations/wiking.sk.po: 
	Updated sk and es translations.
	
	* translations/wiking.it.po:
	* translations/wiking-cms.it.po:
	New translations.
	
2009-06-18  Tomas Cerha  <cerha@brailcom.org>

	* sql/upgrade.10.sql:
	New file for upgrade from Wiking CMS 0.4.4 to 0.4.5.

	* sql/wiking.sql:
	Added column for configuration option `default_language'.  SQL
	converted to lowercase.

	* resources/scripts/wiking.js:
	Disable main menu aria markup for now (breaks keyboard navigation with JAWS).

	* translations/wiking-cms.cs.po: 
	* translations/wiking-cms.de.po: 
	* translations/wiking-cms.es.po: 
	* translations/wiking-cms.fr.po: 
	* translations/wiking-cms.hu.po: 
	* translations/wiking-cms.pl.po: 
	* translations/wiking-cms.sk.po: 
	* translations/wiking.cs.po: 
	* translations/wiking.de.po: 
	* translations/wiking.es.po: 
	* translations/wiking.fr.po: 
	* translations/wiking.hu.po: 
	* translations/wiking.pl.po: 
	* translations/wiking.sk.po: 
	Translations updated.

	* lib/wiking/util.py:
	Handle invalid email address format gracefully.

2009-06-16  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Remove Emails.action_bulk_mail.

2009-06-16  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Utilize new action_insert copy functionality in EmailSpool.

2009-06-16  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Remove superfluous method EmailSpool.action_insert.

2009-06-16  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py:
	Allow copying color themes.

	* translations/wiking-cms.cs.po: 
	* translations/wiking-cms.de.po: 
	* translations/wiking-cms.es.po: 
	* translations/wiking-cms.fr.po: 
	* translations/wiking-cms.hu.po: 
	* translations/wiking-cms.pl.po: 
	* translations/wiking-cms.sk.po: 
	* translations/wiking.cs.po: 
	* translations/wiking.de.po: 
	* translations/wiking.es.po: 
	* translations/wiking.fr.po: 
	* translations/wiking.hu.po: 
	* translations/wiking.pl.po: 
	* translations/wiking.sk.po: 
	Translations updated.

	* lib/wiking/db.py: Added support for record copying.

2009-06-16  Milan Zamazal  <pdm@brailcom.org>

	* doc/src/devel/devel-faq.en.txt:
	New FAQ entry: How to discard original item ids in global actions invoked from items?.

2009-06-16  Milan Zamazal  <pdm@brailcom.org>

	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	CMS translations updated.

2009-06-16  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Allow creating new bulk e-mails by copying from old bulk e-mails.

2009-06-16  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: Added documentation on 'Action' specifications.

2009-06-12  Milan Zamazal  <pdm@brailcom.org>

	* translations/wiking-cms.cs.po:
	* translations/wiking.cs.po:
	* translations/wiking.de.po:
	* translations/wiking.es.po:
	* translations/wiking.fr.po:
	* translations/wiking.hu.po:
	* translations/wiking.pl.po:
	* translations/wiking.sk.po:
	Translations updated.

2009-06-11  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css:
	Force the found record style to override row styles.

	* lib/wiking/db.py:
	Fix search highlighting on pytis redirection.  Allow turning off
	automatic binding parent title concatenation.

2009-06-10  Milan Zamazal  <pdm@brailcom.org>

	* ev/null:
	bulkmailer script added.

2009-06-10  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* sql/wiking.sql:
	Change report_address to sender_address in e-mail spool.

2009-06-10  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* sql/wiking.sql:
	New module EmailSpool.

2009-06-09  Tomas Cerha  <cerha@brailcom.org>

	* TODO: 
	Updated.

	* lib/wiking/db.py:
	Fixed request message processing in binding parent redirect.

2009-06-08  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py: 
	* lib/wiking/db.py:
	Allow redefinition of binding parent uri.  Avoid `action_list'
	message arguments.

2009-06-04  Tomas Cerha  <cerha@brailcom.org>

	* sql/wiking.sql: 
	Suppress server notifications during database objects creation.

2009-06-04  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.cs.po: 
	* translations/wiking.de.po: 
	* translations/wiking.es.po: 
	* translations/wiking.fr.po: 
	* translations/wiking.hu.po: 
	* translations/wiking.pl.po: 
	* translations/wiking.sk.po: 
	Translations updated.

	* lib/wiking/util.py:
	Display different message when the password already expired.

2009-06-03  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py:
	Allow cloning existing `Document' instances.

2009-06-02  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	* translations/wiking.cs.po:
	* translations/wiking.de.po:
	* translations/wiking.es.po:
	* translations/wiking.fr.po:
	* translations/wiking.hu.po:
	* translations/wiking.pl.po:
	* translations/wiking.sk.po:
	Translations updated.

	* lib/wiking/application.py:
	* lib/wiking/modules.py:
	* lib/wiking/request.py:
	* lib/wiking/util.py:
	Handle password expiration within authentication procedure automatically.

2009-05-29  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py: 
	* lib/wiking/cms/cms.py: 
	Allow subdirectories in stylesheet URIs.

	* lib/wiking/util.py: 
	* lib/wiking/cms/cms.py: 
	* lib/wiking/application.py: 
	* lib/wiking/cms/appl.py: 
	Pass `req' to `Application.stylesheets()'.

	* lib/wiking/export.py: 
	* lib/wiking/cms/appl.py: 
	Allow dynamic site title and subtitle modification.

	* lib/wiking/db.py:
	Allow dynamic determination of user selectable filters.

2009-05-28  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: 
	Allow dynamic determination of BrowseForm columns.

2009-05-20  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Text registration improved.

2009-05-20  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Prefill default custom texts in CommonTexts forms.

2009-05-20  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Move WMI settings from CommonTexts to Texts.

2009-05-19  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Make TextReferrer methods non-public.

2009-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Make translations in Texts and Emails work properly.

2009-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	New argument `role' added to Users.find_users.

2009-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* lib/wiking/request.py:
	New method User.lang.

2009-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Minor typo fix.

2009-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Make the new classes for handling predefined texts actually usable.

2009-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* sql/wiking.sql:
	Allow adding custom predefined e-mails.

2009-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* sql/wiking.sql:
	Preliminary support for predefined e-mail texts.

2009-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Some fixes in Texts.

2009-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Doc fix in Texts.

2009-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Allow passing formatting arguments to predefined texts.

2009-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Documentation of Texts etc. updated.

2009-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* sql/wiking.sql:
	Texts module reworked.

2009-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/db.py:
	Don't crash on calls of db functions returning void.

2009-05-14  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py: 
	Handle multiple accounts with one email address in password reminder.

2009-05-14  Hynek Hanke  <hanke@brailcom.org>

	* lib/wiking/cms/cms.py (Users.find_user): Marked as deprecated.
	(Users.find_users): New method.
	(Users.find_users.record_to_user): Fixed.
	(Users.user): Accept login or uid as user identification parameter.
	(Users.find_users.record_to_user): Only accept email as a parameter and
	always return a list.

2009-05-07  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: 
	* lib/wiking/cms/cms.py: 
	Methods `action_insert' and `action_update' cleaned up.

	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	* translations/wiking.cs.po:
	* translations/wiking.de.po:
	* translations/wiking.es.po:
	* translations/wiking.fr.po:
	* translations/wiking.hu.po:
	* translations/wiking.pl.po:
	* translations/wiking.sk.po:
	Translations updated.

	* lib/wiking/configuration.py: 
	* lib/wiking/cms/appl.py: 
	* lib/wiking/cms/certificates.py: 
	* lib/wiking/cms/cms.py: 
	Support for certificates moved to a saparate module and	disabled for now.

2009-05-06  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py:
	Add forward argument to distingiush request forwarding caused by
	pytis redirection.

	* NEWS: 
	Updated.

	* lib/wiking/request.py: 
	Docstrings improved.

2009-05-05  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py: 
	* lib/wiking/util.py: 
	Added support for exporting the iframe content.

2009-05-04  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py:
	Fixed error in inserted row construction.

2009-05-04  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/db.py:
	Redundant dbconnection storage in PytisModule removed.

2009-05-04  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py:
	Export registration notification message to HTML to prevent URI misinterpretation.

	* lib/wiking/util.py: 
	Removed forgotten bypass of email address validation.

2009-05-04  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/db.py:
	Handle unavailability of database in PytisModule.

2009-05-04  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/db.py:
	Delay database access initialization in PytisModule.

2009-04-30  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: 
	* lib/wiking/util.py: 
	Make use of new Pytis support for multiple database connections
	also in DB function handling.

	* lib/wiking/cms/cms.py:
	Define dynamic layouts in `_layout()' to allow easier
	redefinition.  Allow password change to admin without knowledge of
	the previous password.

2009-04-29  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: 
	Avoid duplicate assignments into one DB column.

	* lib/wiking/cms/cms.py:
	Comment out the currently unusable support for user organizations.

	* lib/wiking/util.py:
	Make use of new Pytis support for multiple database connections.

2009-04-24  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking-cms.cs.po: 
	* translations/wiking-cms.de.po: 
	* translations/wiking-cms.es.po: 
	* translations/wiking-cms.fr.po: 
	* translations/wiking-cms.hu.po: 
	* translations/wiking-cms.pl.po: 
	* translations/wiking-cms.sk.po: 
	* translations/wiking.cs.po: 
	* translations/wiking.de.po: 
	* translations/wiking.es.po: 
	* translations/wiking.fr.po: 
	* translations/wiking.hu.po: 
	* translations/wiking.pl.po: 
	* translations/wiking.sk.po:
	Translations updated.

2009-04-23  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py:
	Use exceptions in registration confirmation error handling.

	* lib/wiking/util.py:
	New exception type BadRequest.

2009-04-22  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Don't crash on non-integer uids in registration confirmation.

2009-04-15  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.cs.po: 
	Translations updated.

	* lib/wiking/export.py: 
	* lib/wiking/request.py: 
	* resources/css/default.css: 
	Improved export of warning messages.

2009-04-10  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py:
	Added support for exporting mail text into HTML (as LCG Structured text).

	* translations/wiking-cms.es.po:
	* translations/wiking-cms.cs.po:
	Translations updated.

	* lib/wiking/cms/cms.py: 
	Separate sending the registration code from `_redirect_after_insert()'.

2009-04-07  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css:
	Replace `background' by `background-color' when setting just color.

	* lib/wiking/export.py: 
	* resources/css/default.css: 
	* lib/wiking/util.py:
	Export request messages in exporter instead of adding special content.

2009-04-06  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: 
	Allow easier overriding of refered row resolution.

2009-04-03  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py: 
	* lib/wiking/request.py: 
	* lib/wiking/cms/cms.py: 
	Module URI caching moved to the request object (new request metohod `module_uri()').

2009-04-01  Milan Zamazal  <pdm@brailcom.org>

	* doc/src/devel/devel-faq.en.txt:
	New FAQ entry: How can I present field content as a link?.

2009-03-30  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py: 
	* lib/wiking/cms/cms.py: 
	Pass the request object to session `init()'.

2009-03-25  Milan Zamazal  <pdm@brailcom.org>

	* doc/src/devel/devel-faq.en.txt:
	New FAQ entry: How to add an action button that invokes an action of another module.

2009-03-10  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py: 
	Indentation fixed.

	* lib/wiking/request.py:
	Don't fail to unset cookie even if it was not set.

2009-03-06  Tomas Cerha  <cerha@brailcom.org>

	* TODO: 
	Updated.

	* lib/wiking/cms/appl.py: 
	`Roles.check' -> `Request.check_roles()'.

	* lib/wiking/request.py:
	New method `Request.check_roles()'.  Role documentation updated to
	include dynamic roles.

	* lib/wiking/cms/cms.py:
	Don't alias `FieldSpec' -> `Field' here.  It is already in pytis.
	(Module): 

2009-03-04  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Typo in Users.check_registration_code fixed.

2009-03-04  Tomas Cerha  <cerha@brailcom.org>

	* Makefile:
	Avoid using echo -e in check-lib.

	* lib/wiking/__init__.py: 
	* lib/wiking/request.py: 
	Modify pytis configuration only in the Apache environment.

	* lib/wiking/cms/appl.py: 
	* lib/wiking/cms/cms.py: 
	Cosmetic improvements.

2009-03-03  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/db.py:
	New method PytisModule.Record.user_roles.

2009-03-02  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/configuration.py:
	* lib/wiking/util.py:
	New configuration option `dbsslm'.

2009-02-24  Hynek Hanke  <hanke@brailcom.org>

	* translations/wiking-cms.es.po: Translations updated.
	* translations/wiking.es.po: Translations updated.	
	

2009-02-16  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/configuration.py: 
	* lib/wiking/handler.py: 
	* lib/wiking/util.py: 
	Added support for multiple database connections.

2009-02-11  Milan Zamazal  <pdm@brailcom.org>

	* doc/src/devel/devel-faq.en.txt:
	New Q&A: How to define the key column of a module table?.

2009-02-11  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Allow making customized User info classes.

2009-02-11  Milan Zamazal  <pdm@brailcom.org>

	* doc/src/devel/devel-faq.en.txt:
	Formatting fixes in devel-faq.

2009-02-05  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/devel/devel-faq.en.txt: Minor improvement.

2009-02-02  Milan Zamazal  <pdm@brailcom.org>

	* doc/src/devel/devel-faq.en.txt:
	New Q&A: How can I change a single column database value in form processing?.

2009-02-02  Milan Zamazal  <pdm@brailcom.org>

	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	* translations/wiking.cs.po:
	* translations/wiking.de.po:
	* translations/wiking.es.po:
	* translations/wiking.fr.po:
	* translations/wiking.hu.po:
	* translations/wiking.pl.po:
	* translations/wiking.sk.po:
	Translation update.

2009-02-02  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Reset password on password reminder when md5 passwords are used.

2009-02-02  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Don't fail on password reminder request.

2009-02-02  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Set correct title on password reminders for logged-in users.

2009-01-30  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py:
	HTML validity fix.

2009-01-29  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py: 
	* lib/wiking/cms/cms.py: 
	* lib/wiking/db.py: 
	Show RSS info in CMS panels.

	* lib/wiking/request.py:
	Pass RSS channel language through prefered languages to prevent
	406 errors.

2009-01-28  Tomas Cerha  <cerha@brailcom.org>

	* resources/images/feed-icon-small.png: 
	* lib/wiking/export.py: 
	* lib/wiking/util.py: 
	Added support for RSS channels defined by panels.

	* lib/wiking/db.py: 
	Added basic support for database functions.

	* lib/wiking/db.py: 
	Allow link arguments in `link()' method.

2009-01-27  Tomas Cerha  <cerha@brailcom.org>

	* Makefile:
	Cleaned up.

	* TODO: 
	Updated.

	* lib/wiking/cms/cms.py:
	Attachments redirection outside WMI fixed.

	* lib/wiking/cms/appl.py:
	Avoid login link in page footer.

2009-01-23  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py:
	Bugfix.

	* bin/import-texts.py:
	Expect different filename format (for consistency).  Suppress
	pytis logging and improve the output.

2009-01-19  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: 
	* lib/wiking/cms/cms.py: 
	Allow easier binding parent redirection.

2009-01-15  Milan Zamazal  <pdm@brailcom.org>

	* doc/src/devel/devel-faq.en.txt:
	Some devel FAQ added.

2009-01-15  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: 
	Allow customization of displayed related content in derived
	classes.
	
	* lib/wiking/db.py: 
	Use current server uri in RSS.

2008-12-16  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css:
	MSIE 7 fixes.  Media player style updated for new LCG export.

	* lib/wiking/request.py:
	Ignore country in HTTP Accept-Language header.

2008-12-02  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py: 
	Convert prefered language cookie to str.

2008-12-02  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py: 
	Encode/decode unicode cookies properly.  Docstrings added.

2008-12-01  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py:
	Allow access to Wiking modules from computer functions.

2008-11-28  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py:
	Encode also "text/plain" data.

2008-11-27  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css:
	Media player styles updated.

2008-11-24  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py:
	(Request.serve_file): Added support for file locking.

2008-11-21  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py:
	Make login dialog fields larger.

2008-11-21  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	New action Users.action_regreminder.

2008-11-21  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Users.role_users removed, Users.send_mail created.

2008-11-21  Milan Zamazal  <pdm@brailcom.org>

	* doc/src/devel/devel-faq.en.txt:
	New FAQ entry (non-breakable spaces).

2008-11-18  Tomas Cerha  <cerha@brailcom.org>

	* NEWS:
	Updated.

	* lib/wiking/configuration.py: Don't define the documentation of
	`password_storage' as translatable.

	* lib/wiking/cms/cms.py:
	Don't require registration code confirmation when the account is
	enabled manually.

2008-11-18  Milan Zamazal  <pdm@brailcom.org>

	* translations/wiking-cms.cs.po:
	Formatting typo in Czech translation fixed.

2008-11-15  Milan Zamazal  <pdm@brailcom.org>

	* doc/src/devel/devel-faq.en.txt:
	New devel-faq entries: Field formatting.

2008-11-14  Milan Zamazal  <pdm@brailcom.org>

	* doc/src/devel/devel-faq.en.txt:
	New devel-faq entry: Link destinations.

2008-11-13  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	Minor registration e-mail formatting improvement.

2008-11-13  Milan Zamazal  <pdm@brailcom.org>

	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	Translation update.

2008-11-13  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/util.py:
	Allow multiple recipients in e-mails.

2008-11-13  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	New method Users.role_users.

2008-11-13  Tomas Cerha  <cerha@brailcom.org>

	* resources/scripts/wiking.js: Avoid error when language selection
	is not present.

2008-11-05  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py:
	Don't put further constraints on `new_password' type.

	* lib/wiking/configuration.py:
	Option password_storage moved to the section marked as CMS specific.

2008-11-04  Milan Zamazal  <pdm@brailcom.org>

	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	Translations updated.

2008-11-04  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/appl.py:
	* lib/wiking/cms/cms.py:
	* lib/wiking/configuration.py:
	Implementation of MD5 passwords support finished.

2008-11-04  Tomas Cerha  <cerha@brailcom.org>

	* TODO:
	Updated.

	* lib/wiking/cms/appl.py:
	Limit the registration authentication hack to the intended scope.

2008-11-03  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	Make logout page title translatable.

2008-11-03  Milan Zamazal  <pdm@brailcom.org>

	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	* translations/wiking.cs.po:
	* translations/wiking.de.po:
	* translations/wiking.es.po:
	* translations/wiking.fr.po:
	* translations/wiking.hu.po:
	* translations/wiking.pl.po:
	* translations/wiking.sk.po:
	Translations updated.

2008-11-03  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: 
	* lib/wiking/cms/cms.py: 
	Distinguish 'row' vs. 'record' consistently.  `StoredFileModule'
	removed and implemented directly within `Attachments'.  Default
	exception matchers updated.

2008-10-31  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/appl.py:
	* lib/wiking/util.py:
	Show WMI link in login panel (if anabled).

	* lib/wiking/handler.py:
	Error page improved.

	* resources/scripts/wiking.js: 
	Put login panel to the end in keyboard navigation order.

	* lib/wiking/export.py: 
	Put panels directly into the main level of keyboard navigation.

2008-10-30  Milan Zamazal  <pdm@brailcom.org>

	* translations/wiking-cms.cs.po:
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	* translations/wiking.cs.po:
	* translations/wiking.de.po:
	* translations/wiking.es.po:
	* translations/wiking.fr.po:
	* translations/wiking.hu.po:
	* translations/wiking.pl.po:
	* translations/wiking.sk.po:
	Translations updated.

2008-10-29  Tomas Cerha  <cerha@brailcom.org>

	* resources/scripts/wiking.js:
	Initialize menus also when the main menu does not exist.
	
	* lib/wiking/__init__.py:
	Version set to 0.4.5-pre3.

	* lib/wiking/export.py: 
	Fixed page navigation links.
	
	* lib/wiking/util.py: 
	* lib/wiking/export.py: 
	* resources/css/default.css:
	* resources/scripts/wiking.js:
	Styling information polished.  Cosmetic improvements.

	* doc/src/devel/_index.txt: 
	* doc/src/devel/styles.en.txt:
	New chapter about Style Sheet Customization.

	* doc/src/admin/apache.en.txt: 
	Mod_python setup improved.  Added section about public hosting
	setup.

	* doc/src/admin/config.py:
	Set section anchors according to configuration option names.
	
2008-10-27  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/application.py:
	* translations/wiking-cms.cs.po: 
	* translations/wiking-cms.de.po:
	* translations/wiking-cms.es.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.pl.po:
	* translations/wiking-cms.sk.po:
	* translations/wiking.cs.po:
	* translations/wiking.de.po:
	* translations/wiking.es.po:
	* translations/wiking.fr.po:
	* translations/wiking.hu.po:
	* translations/wiking.pl.po:
	* translations/wiking.sk.po:
	* lib/wiking/cms/appl.py:
	Translations updated.

	* doc/src/cms/modules.cs.txt: 
	* doc/src/cms/modules.en.txt: 
	* lib/wiking/cms/cms.py: 
	Use predefined filters to list active/inactive/unconfirmed users.

	* translations/wiking-cms.cs.po: 
	Fixed typo.

	* lib/wiking/export.py: 
	Fixed bottom-bar content composition.

	* resources/css/default.css:
	Improved language selection display when menu is not displayed.

2008-10-24  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py:
	* resources/css/default.css:
	Present submenu as main navigation, when there are no items in
	the main level of menus.

	* NEWS: Updated.

	* lib/wiking/configuration.py
	* lib/wiking/export.py:
	Added support for configurable language selection images.

	* lib/wiking/application.py:
	* lib/wiking/cms/appl.py:
	* resources/css/default.css:
	Allow application defined bottom bar and footer content.  CMS
	specific code moved to CMS.

2008-10-23  Tomas Cerha  <cerha@brailcom.org>

	* sql/wiking.sql:
	Added missing mapping_id references into `planner' and `news'.

	* lib/wiking/__init__.py: 
	* lib/wiking/export.py: 
	* lib/wiking/cms/appl.py: 
	* lib/wiking/cms/cms.py: 
	Display the panels in WMI in the same form as outside.

2008-10-22  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: MSIE image float workaround.

	* translations/wiking-cms.cs.po: Updated.

	* lib/wiking/cms/cms.py: Apply sorting to ensure redirection to
	the first subpage.

	* resources/scripts/wiking.js: Handle pages with no menu gracefully.

2008-10-20  Tomas Cerha  <cerha@brailcom.org>


	* doc/src/devel/_qa.cs.txt: 
	* doc/src/devel/devel-faq.en.txt:
	New FAQ section in developer's documentation.  Some questions moved
	from `_qa.cs.txt'

	* doc/src/cms/wmi.cs.txt: 
	* doc/src/cms/wmi.en.txt: 
	Updated.

	* doc/src/cms/pages.cs.txt: 
	* doc/src/cms/pages.en.txt: 
	Updated.

	* doc/src/devel/_index.txt: 
	* doc/src/devel/handling.en.txt: 
	* doc/src/devel/modularization.en.txt: 
	* doc/src/devel/overview.en.txt: 
	* doc/src/devel/devel.en.txt: 
	Added devel overview and request handling overview.

	* doc/src/devel/application.py:
	Sort the methods alphabetically.
	Use method names as section anchors.

2008-10-16  Tomas Cerha  <cerha@brailcom.org>

	* NEWS:
	Updated.

	* lib/wiking/__init__.py:
	Version set to 0.4.5-pre1.

	* lib/wiking/configuration.py: 
	* lib/wiking/request.py: 
	Allow default language configuration, including server name
	specific defaults.

2008-10-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Send OpenSSL certificate request instruction, instead of GnuTLS.
	.
	The reason for this change is that certtool apparently doesn't allow to work.
	with encrypted private keys..

2008-10-15  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py:
	Use record.validate() to respect runtime filters during validation.

	* INSTALL:
	Added python-dns dependency.

	* lib/wiking/util.py:
	* translations/wiking.cs.po:
	* translations/wiking.de.po:
	* translations/wiking.es.po:
	* translations/wiking.fr.po:
	* translations/wiking.hu.po:
	* translations/wiking.pl.po:
	* translations/wiking.sk.po:
	Translation comments added.

2008-10-14  Tomas Cerha  <cerha@brailcom.org>

	* translations/Makefile: 
	Extract source file comments labeled by "Translators:".

2008-10-14  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Typo in `form_name' parameter fixed.

2008-10-14  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking-cms.cs.po: 
	* translations/wiking-cms.es.po: 
	* translations/wiking-cms.pl.po: 
	* translations/wiking.cs.po: 
	* translations/wiking.de.po: 
	* translations/wiking.es.po: 
	* translations/wiking.pl.po: 
	* translations/wiking.sk.po: 
	Updated.

	* translations/wiking-cms.de.po:
	* translations/wiking-cms.fr.po:
	* translations/wiking-cms.hu.po:
	* translations/wiking-cms.sk.po:
	* translations/wiking.fr.po:
	* translations/wiking.hu.po:
	New empty translation files.

2008-10-10  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/appl.py:
	(Application.panels): Always return a list, never tuple.

	* resources/css/default.css:
	Minor improvements.

	* lib/wiking/request.py:
	If cookie value was updated by 'set_cookie()', respect it also in
	'cookie()'.

2008-10-06  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py: 
	Pass error messages through `req.message()' rather than adding
	them directly to the content.

2008-09-30  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Added styles for new form controls.

2008-09-26  Milan Zamazal  <pdm@brailcom.org>

	* doc/src/devel/_qa.cs.txt:
	New QA entry (errors after database creation).

2008-09-23  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py: 
	* lib/wiking/util.py: 
	* lib/wiking/cms/cms.py: 
	Allow sections in News and Panel content.

2008-09-22  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: Login dialog error message handling fixed.

	* lib/wiking/cms/cms.py: Allow dynamic control of menu item availability.

	* resources/css/default.css: Highlight found record also in `ListView'.

2008-09-19  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/devel/_index.txt: 
	* doc/src/devel/application.py: 
	* doc/src/devel/handling.en.txt: 
	* doc/src/devel/modularization.en.txt: 
	Added basic documentation of the request handling process.	

	* doc/src/devel/qa.cs.txt: Renamed to `_qa.cs.txt' to hide it from
	lcg-make.

	* lib/wiking/__init__.py: 
	* lib/wiking/db.py: 
	* lib/wiking/util.py: 
	Pass messages through request message stack.	

	* lib/wiking/request.py: Improved documentation.  Added support
	for request message stack.

2008-09-18  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py:
	* translations/wiking-cms.cs.po:
	* translations/wiking.cs.po:
	Allow modification of config option `default_sender_address'
	through WMI.

	* lib/wiking/configuration.py: Documentation improved.

2008-09-12  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py:
	Don't define `Field' here.  Pass `form_name' with `search'.

	* lib/wiking/db.py:
	Don't raise exceptions when `data.delete()' returns False.  Use
	`_DELETE_LABEL' also for deletion confirmation button.

2008-09-11  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/__init__.py: Version set to 0.4.4.
	
	* lib/wiking/cms/cms.py: 
	Don't redirect to unpublished submenu items.
	
	* sql/wiking.sql: 
	Database config columns renamed to match with configuration
	option names.  Columns for new options added.

2008-09-10  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: Use action labels as default action subtitles.

	* lib/wiking/cms/cms.py:
	* lib/wiking/util.py: 
	WMI reorganized.  Handle embedded modules through bindings.
	Respect bindings in RSS and Panels.  Override default action
	labels and descriptions where appropriate.  Respect changes in
	action definition.

2008-09-09  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: 
	* lib/wiking/util.py: 
	Allow easy redefinition of labels and descriptions for default
	actions.  Allow easy redefinition of bindings.  Support bindings
	in `RssModule' and `Panelizable'.  Avoid CMS dependency in
	`RssModule'.

2008-09-08  Tomas Cerha  <cerha@brailcom.org>

	* TODO: 
	* lib/wiking/db.py: 
	* lib/wiking/cms/cms.py: 
	* sql/wiking.sql: 
	* translations/wiking-cms.cs.po: 
	The module 'Images' merged into 'Attachments', but temporarily
	commented out.  Attachments further cleaned up.

2008-09-05  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: 
	* lib/wiking/cms/cms.py: 
	Link generation (yet again) reworked.

2008-09-04  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/application.py: 
	* lib/wiking/handler.py: 
	* lib/wiking/cms/appl.py: 
	The `configure' method removed from `Application' API and
	reimplemented within the CMS application internally.
	
	* lib/wiking/db.py:
	Automatically prefix document title by the current binding
	relation.  Fix URIs for related actions.
	

2008-09-02  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py: 
	* sql/wiking.sql: 
	* translations/wiking-cms.cs.po: 
	Added a checkbox to control the presence of a page in the menu
	independently, rather than through the empty order field.

2008-09-01  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: Include a `Back' button in record deletion
	confirmation page.
	Respect `_SUBMIT_BUTTONS' also for the `insert' action.

2008-08-29  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py:
	Init `self._uri_prefix' sooner to avoid	crash on "Hide panels".

2008-08-27  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py: 
	* lib/wiking/db.py: 
	Pytis redirection support fixed for the new URI resolution mechanism.
	
	* lib/wiking/db.py: 
	Allow customizations of record deletion messages.


2008-08-26  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/application.py: 
	* lib/wiking/db.py: 
	* lib/wiking/handler.py: 
	* lib/wiking/modules.py: 
	* lib/wiking/request.py: 
	* lib/wiking/util.py: 
	* lib/wiking/cms/appl.py: 
	* lib/wiking/cms/cms.py: 
	* translations/wiking-cms.cs.po: 
	Handle all aspects of `bindings' dependency automatically.
	.
	This is a major rewrite of the request handling process.  Wiking
	should now automatically generate and handle uri's for modules
	related through pytis `bindings' specification and take care of
	other aspects, such as automatically prefill the value of the
	`binding_column' for new records, check it for existing records,
	etc.
	.
	Changes in most applications are required.
	
2008-08-19  Tomas Cerha  <cerha@brailcom.org>

	* resources/scripts/wiking.js: 
	Start on the first menu item if there is no active menu item.

	* doc/src/cms/wmi.cs.txt: 
	* doc/src/cms/wmi.en.txt: 
	* lib/wiking/cms/cms.py: 
	* translations/wiking-cms.cs.po: 
	Set the current color theme within the Themes module, not in configuration.

2008-08-18  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: 
	* lib/wiking/cms/cms.py: 
	* resources/css/default.css: 
	* sql/wiking.sql: 
	Use real buttons for action buttons and avoid button styles and
	theme colors.

	* lib/wiking/export.py: Omit the 'main-menu' div.

	* resources/scripts/wiking.js: Allow multiple keyboard shortcuts
	for one command.  Defined new shortcuts for MSIE/JAWS.

2008-08-15  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/handler.py:
	* lib/wiking/util.py:
	Added support for setting the content's
	secondary language.

2008-08-13  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py (Session): Make expiration configurable.

	* lib/wiking/configuration.py: New option `session_expiration'.

2008-08-12  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.cs.po: 
	* translations/wiking.de.po: 
	* translations/wiking.sk.po: 
	Updated.

	* resources/scripts/wiking.js:
	Menu navigation hotkeys changed.

	* lib/wiking/application.py:
	* lib/wiking/util.py: 
	Support for inclusion of arbitrary login dialog and login panel
	content generalized.

2008-08-08  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Added style for panels menu top item.

	* resources/scripts/wiking.js: Added support for keyboard
	navigation within panels, language selection and WMI links.  Don't
	set focus when the current location includes an anchor.

	* lib/wiking/export.py: Added support for extended keyboard
	navigation.

	* lib/wiking/application.py: Allow definition of login panel and
	login dialog texts.  Improved handling of exceptions during
	exception handling...

	* lib/wiking/util.py: Display login panel and login dialog texts.

2008-08-07  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py (CMSExtension.embed): TODO added.

2008-08-06  Milan Zamazal  <pdm@brailcom.org>

	* doc/src/devel/qa.cs.txt:
	Q&A update.

2008-08-06  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Take initial redirection module from submenu(), not _MENU.

2008-08-05  Milan Zamazal  <pdm@brailcom.org>

	* ev/null:
	Initial Wiking Q&A document created.

2008-08-05  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* lib/wiking/request.py:
	Allow access to organization_id in wiking.Users.

2008-08-05  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: Focus the login name field on page `onload'.

	* lib/wiking/cms/cms.py: Allow AUTHOR to commit a changed page
	text.

	* resources/css/default.css: Updated for new pytis ShowForm
	layout.

	* resources/scripts/wiking.js: New file.

	* lib/wiking/export.py: Include Wiking script and call
	`wiking_init()' on page load to add support for ARIA markup and
	keyboard menu navigation.  Make top level heading keyboard
	navigable.

2008-07-31  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: Use javascript to focus the login name field
	in login form.

	* lib/wiking/cms/cms.py: Cosmetic changes.

	* lib/wiking/__init__.py: Suppress pytis logging data operations.

2008-07-28  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/handler.py: Respect configuration option `dbpass'.

	* lib/wiking/configuration.py: New option `dbpass'.

2008-07-11  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py (News.Spec._date_title): Handle None
	values correctly.

	* lib/wiking/db.py (PytisModule._record_uri): Accept arguments and
	use them as uri parameters.

	* lib/wiking/util.py: Display logout button next to user's name in
	the login panel.

2008-07-11  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/util.py:
	Organize login panel vertically.

2008-07-10  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* lib/wiking/request.py:
	* lib/wiking/util.py:
	Display organization next to user's name in the login panel.

2008-07-10  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* lib/wiking/configuration.py:
	* translations/wiking-cms.cs.po:
	Czech translations updated.

2008-07-10  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/application.py: `send_mail()' arguments fixed.
	Logging improved.

	* lib/wiking/db.py: Don't care about language in
	`_document_title()'.

	* lib/wiking/cms/cms.py (Attachments._default_action): Accept the
	`subpath' argument.
	(CertificateRequest._document_title): Don't care about language.

2008-07-09  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Cleanup of new certificate renewal functions.

2008-07-09  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/db.py:
	Generate document title in a separate method of PytisModule.

2008-07-09  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Initial support for changing authentication certificates.

2008-07-08  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: Allow action handling in subitem requests.

	* lib/wiking/modules.py: Allow action handling in subitem requests.

2008-07-07  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py
	(Users._base_uri): Use the 'Registration' module uri for
	registration actions.

2008-07-04  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py (CMSExtension): Allow dynamic menu
	definition in extension modules.

2008-07-04  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/db.py:
	Don't set NULL columns for new rows in PytisModule.Record.rowdata.
	.
	This avoids problems when inserting records to tables with columns declared NOT.
	NULL while defining default values..

2008-07-03  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking-cms.cs.po: Partially updated.

	* lib/wiking/cms/cms.py: User module help strings adjusted.

2008-07-02  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Don't display confusing subtitle in the user registration form.

2008-07-02  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Move organization name to the first column in Organizations listings.

2008-07-02  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	ActiveUsers and InactiveUsers CMS modules uncommented.

2008-07-01  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Make cms.Users field `organization' editable only once.

2008-07-01  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Allow `organization_id' of cms.Users to be null.

2008-07-01  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Filtering in Users improved.
	.
	Use of `all' request argument removed..
	Filter out non-approved users in public lists..

2008-07-01  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Don't display registration message about a sent certificate when there is none.

2008-07-01  Tomas Cerha  <cerha@brailcom.org>

	(Users._default_actions_first): Add authentication method
	dependent actions only if the user is logged.


2008-07-01  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Display organization names rather than VAT ids in Organizations titles.

2008-07-01  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Make the Users filtering conditional.
	.
	Sometimes it is necessary to access all users, typically during registration..
	So don't filter Users if `all' request parameter is present..

2008-07-01  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py (Users): Access role definitions through a
	class method.
	* lib/wiking/handler.py: Profiling support updated for Python 2.5.

2008-06-30  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Typo in Organizations access rights fixed.

2008-06-30  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Don't display users without self-confirmed registrations.

2008-06-30  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* sql/wiking.sql:
	Use `vatid' instead of `ico' and `dic' in organizations.

2008-06-26  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py: Use pytis based binding specifications.

	* lib/wiking/db.py: Use pytis based binding specifications.

	* lib/wiking/util.py (Binding): Derive from pytis `Binding' class.

2008-06-24  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: Don't jump to the record in the 'list'
	action URI.

2008-06-24  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* sql/wiking.sql:
	New module cms.Organizations.

2008-06-24  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Mistake in setting user registration expiry fixed.

2008-06-23  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Create registration e-mail in a separate method.

2008-06-23  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* lib/wiking/util.py:
	Allow multiple attachments in e-mails.
	.
	Attachment arguments in `send_mail' reworked..

2008-06-23  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Added styles for index search
	controls and found record.

	* lib/wiking/util.py (ActionCtrl.export): Jump to the corresponding
	record in the 'list' action URI.

2008-06-23  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/util.py:
	Convert e-mail address to `str' before checking it for validity.

2008-06-23  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Validate users' e-mail addresses.

2008-06-20  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/configuration.py: Added docmentation.  Typos fixed.
	CMS specific options marked as hidden.  Set correct option types.

2008-06-20  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* lib/wiking/configuration.py:
	cms.Users.Spec._LOGIN_IS_EMAIL replaced by a configuration option.

2008-06-20  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/appl.py:
	* lib/wiking/cms/cms.py:
	* lib/wiking/configuration.py:
	cms.Users.Spec._CERTIFICATE_AUTHENTICATION replaced by a configuration option.

2008-06-20  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	* lib/wiking/db.py:
	* lib/wiking/export.py:
	* lib/wiking/util.py:
	Excessive newlines removed in a few places.

2008-06-20  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Send certtool template in the certificate request info mail.

2008-06-20  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/handler.py: Handle Internal Server errors here.
	Print the error page translated and attempt use the Exporter.

	* sql/wiking.sql (users): Set `certauth' as NOT NULL.

	* lib/wiking/application.py (Application.handle_exception): Let
	the handler handle Internal Server Errors.

	* translations/wiking.cs.po: Updated translations.

	* lib/wiking/request.py: Raise `ClosedConnection' exception on an
	error during writing the data to the client.

	* lib/wiking/util.py (InternalServerError): New class.

2008-06-20  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	cms.Users.action_insert arguments made less wrong.
	.
	Note I don't understand action_* arguments at all, so there can still be.
	something wrong there..

2008-06-20  Milan Zamazal  <pdm@brailcom.org>
	
	* lib/wiking/cms/cms.py:
	Support for generating new authentication certificate.

2008-06-19  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/db.py:
	Fix of the PytisModule.action_insert cleanup.

2008-06-19  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/db.py:
	PytisModule.action_insert cleanup and split to allow customizations.

2008-06-19  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/util.py:
	Don't crash in util.Document.build when no title is available.

2008-06-19  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/appl.py:
	* lib/wiking/modules.py:
	* lib/wiking/request.py:
	* lib/wiking/util.py:
	Setting authentication parameters of User instances improved
	
2008-06-19  Milan Zamazal  <pdm@brailcom.org>
	
	* lib/wiking/cms/cms.py:
	* sql/wiking.sql:
	Make the users.certauth field non-virtual, add it to the database schema
	This is necessary to make the Users.Spec.check work properly in
	all situations.

2008-06-18  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/db.py:
	New PytisModule actions _default_actions_first and _default_actions_last.

2008-06-17  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py: Cosmetic changes.

	* lib/wiking/util.py: Docstring updated.

2008-06-17  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/cms.py:
	Docstring adjustments in cms.py, especially no explicit reference to Apache.

2008-06-17  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/appl.py:
	Fix call of superclass method in cms.Application.authenticate.

2008-06-17  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/appl.py:
	* lib/wiking/request.py:
	* lib/wiking/util.py:
	Don't display "log out" link when the user is authenticated by a certificate.

2008-06-16  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/cms/appl.py:
	* lib/wiking/cms/cms.py:
	* lib/wiking/request.py:
	Certificate authentication implemented.

2008-06-16  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/modules.py:
	Typo fixes in docstrings.

2008-06-11  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py (Mapping): Display page titles and their
	hierarchy within codebook selections.
	(Attachments): New action for moving the attachment to another page.

2008-06-09  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/handler.py (ModPythonHandler._init): Initialize the
	default value of `cfg.default_sender_address'.

2008-06-04  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py (send_mail): Make the `sender' argument
	optional.  Supply the value of configuration option
	`default_sender_address' if `sender' not defined.

	* lib/wiking/application.py (Application.handle_exception):
	`send_mail()' arguments updated.

	* lib/wiking/cms/configuration.py: Derive boolean options from
	`BooleanOption'.

	* lib/wiking/cms/cms.py: `send_mail()' arguments updated.
	(Config): `cfg.webmaster_addr' -> `cfg.webmaster_address'.
	Automatically fallback to configured default values when the
	database value is None.


	* lib/wiking/request.py (Request.error): `cfg.webmaster_addr' ->
	`cfg.webmaster_address'.  Don't supply the default value for
	`cfg.webmaster_address' here.

	* lib/wiking/handler.py (ModPythonHandler._init): Initialize
	default values of `cfg.webmaster_address' and
	`cfg.default_sender_address'.

	* translations/wiking-cms.cs.po: Updated.

	* lib/wiking/db.py (RssModule.action_rss): `cfg.webmaster_addr' ->
	`cfg.webmaster_address'.

	* lib/wiking/export.py (Exporter._footer): `cfg.webmaster_addr' ->
	`cfg.webmaster_address'.  Don't supply the default value for
	`cfg.webmaster_address' here.

	* lib/wiking/configuration.py (webmaster_addr): Renamed to
	`webmaster_address' for consistency.
	(default_sender_address): New option.

	* sql/wiking.sql: `pages_update' -> `texts_update'.

2008-05-30  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: Allow form type specification in bindings.

	* lib/wiking/cms/cms.py: Attachment management outside WMI fixed.
	Improved page show layout and labels.

	* translations/wiking-cms.cs.po: Updated.

	* translations/wiking.cs.po: Updated.

	* lib/wiking/db.py: Allow overriding default subtitles for
	insert/update/delete operations.  Respect binding form
	specification.

2008-05-29  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py: Allow content management even if an
	uninstalled or renamed module is used in page content.

	* lib/wiking/util.py (send_mail): Only encode subject in UTF-8 if it can
	not be encoded in ASCII.

	* lib/wiking/application.py (Application.handle_exception): Log
	the traceback if sending bug-report by e-mail fails.

2008-05-28  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Minor improvement.

	* lib/wiking/request.py (User): New constructor argument and
	method `email'.
	
2008-05-26  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py (Binding): New class.

	* lib/wiking/cms/cms.py: Use the new support for binding specification.

	* lib/wiking/handler.py (Handler): Docstring updated.

	* lib/wiking/db.py (PytisModule.related): Allow ListView in
	related records list.
	(PytisModule): Improved support for binding specification.

	* lib/wiking/cms/appl.py (Application._maybe_install): Gather
	database connection options from configuration.

2008-05-23  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/admin/apache.en.txt: Updated.

	* doc/src/devel/modularization.en.txt: Updated.

	* lib/wiking/handler.py (ModPythonHandler._init): Read the site
	specific configuration from `config_file' set in Apache config
	option.
	(ModPythonHandler._init): Automatically convert types of all
	configuration options.  Create the default resolver using the new
	configuration options.

	* lib/wiking/configuration.py: Added support for global and site
	specific configuratuion files.  New options 'modules', 'dbname',
	'dbhost', 'dbport', 'dbuser' and 'maintenance'.

2008-05-22  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py (WikingRequest.user): Docstring further
	clarified and outdated note removed.

2008-05-21  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py: Added support for  handling URI
	subpath for pytis module records.  Synced with the current
	resource handling mechanism.

	* lib/wiking/util.py: Updated for new LCG resource handling.

	* lib/wiking/request.py (Request.serve_file): Added support for
	serving files from filesystem.

	* lib/wiking/modules.py (Resources): Simplified thanks to
	simplifications in LCG resource handling.

	* lib/wiking/db.py (PytisModule): Added support for handling URI
	subpath for pytis module records.

2008-05-15  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py: Prefix resource URIs by the `Resources'
	module URI.

	* lib/wiking/modules.py (Resources): New module.

	* resources/css/default.css: Added syles for media player.

	* lib/wiking/util.py Added support for dynamic resource allocation
	in export time.

	* lib/wiking/application.py (Application.stylesheets): Return the
	list of URIs, not `lcg.Stylesheet' instances.

	* lib/wiking/cms/appl.py (Application.stylesheets): Return the
	list of URIs, not `lcg.Stylesheet' instances.  
	(Application): Map the `Resources' module to `_resources'.

	* lib/wiking/cms/cms.py: Create attachments as `Resource'
	instances, not `lcg.Resource'.

	* lib/wiking/configuration.py: New option `resource_path'.

	* lib/wiking/handler.py: Set `cfg.resource_path' from apache
	configuration.

2008-05-14  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py: Sync with the latest LCG version.

2008-05-07  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py (Specification): Define `help' to satisfy
	`CMSModule.descr()'.

	* lib/wiking/cms/cms.py (Embeddable): Docstring extended.
	(CMSExtension, CMSExtensionModule): New classes.
	(Pages._validate): Return validation error in proper format.
	(Pages._redirect_after_insert): View the new page after creation.
	(Pages.RIGHTS_edit): Allow `AUTHOR's to edit pages.
	(Pages.action_commit): Don't allow publication of untitled pages.
	Supply module title automatically if extension module is defined.
	(Pages.action_commit, Pages.action_revert)
	(Pages.action_unpublish): Convert the result of
	`self._analyze_exception()' to an error message.

	* lib/wiking/modules.py (Module.title, Module.descr): Use the
	constants `_TITLE' and `_DESCR' if defined.

2008-05-06  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py: Always locate Wiking modules through
	resolver.

	* lib/wiking/util.py (WikingResolver.available_modules)
	(WikingResolver.wiking_module_cls, WikingResolver.wiking_module):
	New methods.
	(get_module): Function removed.

	* lib/wiking/handler.py: Always locate Wiking modules through resolver.

	* lib/wiking/modules.py (Module.__init__): The argument
	`get_module' replaced by `resolver'.
	(Module._module): New method.

	* lib/wiking/db.py (PytisModule.__init__): Argument `get_module'
	removed.  Pass `resolver' to parent constructor.

	* lib/wiking/configuration.py (_Option_resolver): Default value
	set to None and documentation added.

2008-05-05  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py (Exporter): Derive also from
	`lcg.StyledHtmlExporter' mix-in.

	* lib/wiking/db.py: Validation result assertions moved to better
	places.

2008-04-29  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: LCG fieldset style improved.

	* lib/wiking/util.py (Document.build.mknode): Allow unicode
	characters within node id.

	* lib/wiking/modules.py (Search._result_item): Use LCG helper
	functions for LCG content construction.

2008-03-28  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Added style for group headings.

2008-03-25  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py (PytisModule.__init__): Avoid multiple links to
	the same target.
	(PytisModule._layout): New argument `record'.
	(PytisModule.action_view, PytisModule.action_update): Pass the
	record to `self._layout()' call.

2008-03-19  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py: Docstring improvements.

	* lib/wiking/cms/cms.py: Docstring improvements.
	(Embeddable.submenu): New method.
	(Pages.menu.mkitem): Append also the submenu of an embedded
	module.
	(Embeddable.embed): Allow int in the returned value.
	(Pages.action_view): Handle int in `Embeddable.embed()' result.

	* lib/wiking/export.py (Exporter._node_uri): Preserver absolute
	uri's in node id.

2008-03-18  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/handler.py (Handler.__init__): Handle the
	`translation_path' configuration option differently.

	* resources/css/default.css: Added style for grouping support.

2008-03-16  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Added styles for ListView grid.

2008-03-14  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py (Pages.action_list): Avoid special
	handling in WMI.

2008-03-11  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py (Request.send_http_header): New argument
	to pass HTTP `Content-Length'.
	(Request.result): Set HTTP `Content-Length' appropriately.

2008-03-07  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: Don't pass the request to `LoginPanel' and
	`LoginDialog' constructors.

	* lib/wiking/cms/appl.py: Don't pass the request to `LoginPanel'
	constructor.

2008-03-06  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py (Styles): New class.
	(Stylesheets): Use `Styles' for database access.

	* lib/wiking/cms/appl.py (Application): Handle all
	`MaintananceModeError' situations correctly.

	* lib/wiking/export.py: Make sure the `Documentation' is available
	before including the accessibility statement link.

	* lib/wiking/application.py: Default `Documentation' uri changed
	to `doc'.

	* lib/wiking/util.py (MaintananceModeError): New class.
	(MaintananceModeError): Return a 503 HTTP status code.
	(Time): New class.

	* lib/wiking/modules.py (Stylesheets): Defive from
	`RequestHandler', not `ActionHandler'.
	(CookieAuthentication.authenticate): Added mainenance mode
	support.

2008-03-04  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py (Document.build): Improved recognition of
	parent menu item.

2008-02-29  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py: Field widths set explicitly.

	* lib/wiking/cms/appl.py (Application._maybe_install): Use
	`req.option()' instead of `req.options()'.

	* lib/wiking/request.py (Request.options): Replaced by `option()'.

	* lib/wiking/export.py: Allow more precise heading styling.

2008-02-28  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/appl.py (registration_uri): Respect the change
	in the `Application' method.

	* lib/wiking/util.py (LoginPanel.PanelContent.export)
	(LoginDialog.__init__): Respect the changes in `Application' methods.

	* lib/wiking/application.py (Application.registration_uri)
	(Application.password_reminder_uri)
	(Application.password_change_uri): Pass the request instance as
	the first argument.

2008-02-27  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py (Exporter.Context._init_kwargs): Call
	parent method.

2008-02-26  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/appl.py (Application.handle): Use `req.forward()'
	to pass on the request.

	* lib/wiking/modules.py (RequestHandler._base_uri): Use the base
	uri of the previous request handler if module's own base uri is
	not defined.

	* lib/wiking/request.py (WikingRequest.forward)
	(WikingRequest.handlers): New methods.

	* lib/wiking/application.py (Application.handle): Use
	`req.forward()' to pass on the request.

	* lib/wiking/db.py (PytisModule._insert): Added support for
	automatic prefill of sequence fields.
	(PytisModule._handle): Perform redirection here instead of
	redirecting links.

2008-02-25  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py (Data): Added support for database functions.

	* lib/wiking/db.py: Added support for database functions.

2008-02-22  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/appl.py (Application._auth_user): Pass on the
	request object.

	* lib/wiking/modules.py: Pass the request to all methods where
	a record is constructed.

	* lib/wiking/db.py: Store the current request within the record
	data.

	* lib/wiking/cms/cms.py: Embeddable module support cleaned.  Pass
	the request to all methods where a record is constructed.

	* lib/wiking/util.py: Node state support removed.

	* lib/wiking/export.py (Exporter): Use export context instead of
	node state.

	* lib/wiking/handler.py (Handler.handle): Pass `req' to exporter
	context.

2008-02-19  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py (ActionMenu): New argument 'cls'. 

	* lib/wiking/cms/cms.py (Pages.content_management_panel)
	(Pages.action_view): Set `ActionMenu' `cls'.

	* resources/css/default.css: ActionMenu styles improved.

	* lib/wiking/modules.py (SubmenuRedirect._handle): Respect current
	uri prefix.

2008-02-18  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py (CMSModule._form): Show module help in WMI.
	(Pages.handle): Method transformed into `_handle()'.
	(Pages._handle): Store the current page in `req.page'.
	(Pages._mapped_uri): New method.
	(Pages._actions): Distinguish also actions outside WMI.
	(Pages.content_management_panel): New method.
	(Pages.action_view): Don't create the explicit list of actions here.
	(Users._actions): Only exclude 'list' when needed.

	* lib/wiking/cms/appl.py (Application.resolve): Method removed.
	(Application.handle): New method.

	* lib/wiking/util.py (ActionCtrl): New class.
	(ActionMenu): Be just an `ActionCtrl' container.

	* lib/wiking/db.py (PytisModule._action_menu): Use `_base_uri()'.
	(PytisModule.related): Don't wrap the form within a `Section'.
	(PytisModule.action_list): WMI handling removed.
	(PytisModule.action_view): Wrap related module listings into
	sections.
	(PytisModule.action_insert, PytisModule.action_update)
	(PytisModule.action_delete): Set the `subtitle' according to the
	current action title.

	* doc/src/cms/modules.cs.txt: Heading structure fixed.

	* doc/src/cms/pages.cs.txt: Minor workaround.

	* doc/src/cms/pages.en.txt: Minor workaround.

	* lib/wiking/request.py (Request.set_cookie): Don't set domain.
	Set path to `self.uri_prefix()' if defined.

	* lib/wiking/modules.py (ActionHandler._action): Method renamed to
	`_handle()'.

	* lib/wiking/handler.py (Handler.handle): Pass request handling to
	the application.  Don't set `req.wmi' here.

	* lib/wiking/application.py: Request processing generalized and
	documented.

	* resources/css/default.css: Updated.
	

2008-02-08  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/cms/Attachments.cs.txt: File removed.
	* doc/src/cms/Attachments.en.txt: File removed.
	* doc/src/cms/Languages.cs.txt: File removed.
	* doc/src/cms/Languages.en.txt: File removed.
	* doc/src/cms/News.cs.txt: File removed.
	* doc/src/cms/News.en.txt: File removed.
	* doc/src/cms/Pages.cs.txt: File removed.
	* doc/src/cms/Pages.en.txt: File removed.
	* doc/src/cms/Panels.cs.txt: File removed.
	* doc/src/cms/Panels.en.txt: File removed.
	* doc/src/cms/Planner.cs.txt: File removed.
	* doc/src/cms/Planner.en.txt: File removed.
	* doc/src/cms/Stylesheets.en.txt: File removed.
	* doc/src/cms/Themes.en.txt: File removed.
	* doc/src/cms/cms-intro.en.txt: File removed.
	* doc/src/cms/cms.cs.txt: New file.
	* doc/src/cms/intro.cs.txt: New file.
	* doc/src/cms/intro.en.txt: New file.
	* doc/src/cms/modules.cs.txt: New file.
	* doc/src/cms/modules.en.txt: New file.
	* doc/src/cms/pages.cs.txt: New file.
	* doc/src/cms/pages.en.txt: New file.
	* doc/src/cms/wmi.cs.txt: New file.
	* doc/src/cms/wmi.en.txt: New file.
	* doc/src/cms/_index.txt: Updated.
	* doc/src/cms/cms.en.txt: Updated.
	* doc/src/devel/devel.en.txt: Updated.
        * doc/src/devel/modularization.en.txt: Updated.
        * doc/src/user/user.cs.txt: Updated.
        * doc/src/user/user.en.txt: Updated.


2008-02-07  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py (Request.send_http_header)
	(Request.write): New methods.

2008-01-22  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms/cms.py (Attachments._form): Add a hidden form
	value to ensure proper redirection outside WMI.

2008-01-18  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/application.py (Application.password_change_uri): New
	method.

	* Makefile: Perform more checks before installation.
	(all): Perform checks and compile.
	(install, cvs-install): Don't check or compile, just install.

	* resources/css/default.css: Minor improvement.

	* lib/wiking/cms/cms.py: Allow attachments management outside WMI.
	(CMSModule._form): Use `BrowseForm' instead of `ListView' in WMI.

	* lib/wiking/cms/appl.py (Application.authorize): Allow
	attachments management to Page owner.

	* lib/wiking/util.py (Action): Pass `name' to parent constructor.
	(Action.name): Method removed.
	(ActionMenu): Added support for help links and relation arguments.
	(LoginPanel): Added support for "Change password" link.

	* lib/wiking/db.py (PytisModule.action_list): Use `ListView', not
	`BrowseForm'.
	(PytisModule.related, PytisModule.action_delete)
	(PytisModule._action_menu): Respect changes in `ActionMenu'
	constructor args.
	(PytisModule.related): Use binding title if defined.
	(PytisModule._condition): Accept `condition' and `values' instead
	of `**kwargs'.
	(PytisModule._action_menu): Pass help link to `ActionMenu'.
	(PytisModule._help_target): New method.

	* translations/wiking-cms.cs.po: Updated.

	* translations/wiking.cs.po: Updated.

2008-01-09  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py (LoginDialog.export): Display links within
	the dialog.
	(LoginPanel): Title changed to `Login Panel' instead of just
	`Login'.

	* lib/wiking/cms/cms.py (Pages.action_list): New method to emulate
	list action on the included extension module records.
	(Attachments._link_provider): Allow viewing the attachment file in
	WMI.

	* resources/css/default.css: Login dialog MSIE fixes.

	* sql/init.sql: Respect the new schema.

	* sql/wiking.sql: Order fixed.  References to inexisting tables fixed.

2008-01-07  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Don't float the login panel.

2007-12-21  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py (LoginDialog): Minor fix.

	* lib/wiking/cms/cms.py: RSS support fixed.

	* lib/wiking/cms/appl.py: `Request' API cleaning.

	* lib/wiking/request.py: `Request' API cleaning.  Error page improved.

	* lib/wiking/handler.py: `Request' API cleaning.

	* lib/wiking/modules.py: `Request' API cleaning. 

	* lib/wiking/export.py: Use URI prefix where needed.

	* lib/wiking/db.py: `Request' API cleaning.

	* lib/wiking/application.py: `Request' API cleaning.

2007-12-20  Tomas Cerha  <cerha@brailcom.org>

	* sql/wiking.sql (pages_insert, pages_update): Rules fixed.

	* translations/wiking.de.po: Updated.

	* translations/wiking.sk.po: Updated.

	* lib/wiking/cms/appl.py (Application): Refer to parent class as
	`wiking.Application'.

	* lib/wiking/cms/__init__.py: Import `configuration' instead of
	`config'.

	* lib/wiking/cms/cms.py (Pages._validate)
	(Pages.action_translate): Use access methods to get request
	params.
	(Session): Refer to parent class as `wiking.Session'.

	* lib/wiking/handler.py (Handler.__init__): Only use named options
	as DB connection options.

	* lib/wiking/modules.py (Search): Use access methods to get
	request params.

	* lib/wiking/util.py (LoginPanel.PanelContent.export): Use
	`req.application().registration_uri()' instead of
	`req.registration_uri()'.
	

	* lib/wiking/request.py (WikingRequest.registration_uri)
	(WikingRequest.password_reminder_uri): Methods removed.
	(WikingRequest.application): New method.
	(WikingRequest): Added support for new apache config option
	`StripRequestPath'
	(Request.params): Public attributte removed.

	* lib/wiking/db.py:
	(PytisModule._validate, PytisModule._form, PytisModule._prefill):
	Use access methods to get request params.

2007-12-17  Tomas Cerha  <cerha@brailcom.org>

	* sql/wiking.sql (config.allow_login_panel): Default value set to
	TRUE.

	* lib/wiking/modules.py (CookieAuthentication.authenticate): Raise
	`AuthenticationRedirect' on login command.

	* lib/wiking/__init__.py: Cosmetic change.

	* lib/wiking/cms/__init__.py: New file.

	* lib/wiking/cms/appl.py: New file.

	* lib/wiking/cms/cms.py: New file.
	
	* lib/wiking/cms.py: File removed.

	* translations/wiking-cms.cs.po: Updated.

	* resources/css/default.css: Login form display improved.

	* lib/wiking/util.py (LoginCtrl.export): Use `user.uri()'.
	(LoginDialog): Display registration and password reminder links if
	defined.
	(AuthenticationRedirect): New class.
	(LoginPanel): New class.
	(LoginCtrl): Class removed.

	* lib/wiking/request.py (https): Use `cfg.https_port' instead of
	`cfg.https_ports'.
	(Request.server_uri): New method.
	(Request.abs_uri): Method removed.
	(WikingRequest.registration_uri)
	(WikingRequest.password_reminder_uri): New methods.
	(User): New attribute `uri'.

	* lib/wiking/export.py: Respect the new definition of
	configuration options.

	* lib/wiking/db.py: Use `Request.server_uri()' instead of `Request.abs_uri()'.

	* lib/wiking/configuration.py: config option `https_ports'
	transformed into `https_port'.
	(Configuration._Option_bug_report_address): Documentation
	improved.
	(_Option_allow_wmi_link, _Option_upload_limit)
	(_Option_allow_login_panel, _Option_allow_login_ctrl)
	(_Option_allow_registration): Options removed.
	(Configuration._Option_appl): New option.

	* lib/wiking/cms.py (Application._MAPPING): New item
	`_registration'.
	(Application.registration_uri)
	(Application.password_reminder_uri): New methods.
	(Registration): New module.
	(Pages.handle): New user registration hack removed.
	(Pages.action_view): It a top level page is empty, redirect to its
	first submenu item.
	(Users): Added support for the new `Registration' module.
	(Module): 

	* lib/wiking/application.py (Application.registration_uri)
	(Application.password_reminder_uri): New methods.
	(Application.panels): Don't create the login panel.

2007-12-13  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/cms/Panels.cs.txt: Updated.

	* doc/src/cms/Panels.en.txt: Updated.

	* doc/src/cms/_index.txt: Updated.

	* doc/src/cms/Pages.cs.txt: Updated.

	* doc/src/cms/Pages.en.txt: Updated.

	* doc/src/cms/cms-intro.en.txt: Updated.

	* doc/src/cms/cms.en.txt: Updated.

	* doc/src/cms/Menu.cs.txt: File removed.

	* doc/src/cms/Menu.en.txt: File removed.

	* NEWS: Updated.
	
	* translations/wiking-cms.cs.po: Updated.

	* sql/wiking.sql (users): Support the new role management model.

	* lib/wiking/cms.py (Users): Improved access rights management.
	Change password in a separate dialog (require the old password).
	Translate registration notifications to users language.  
	(Users.user): Ugly bug fixed.

	* lib/wiking/util.py (send_mail): Added support for automatic
	message translation when the new argument `lang' is passed.
	Automatically set the smtp_server according to configuration.
	(send_mail): Encode the HTML part to UTF-8 if necessary.

	* lib/wiking/application.py (Application.handle_exception): Don't
	pass `smtp_server' to `send_mail()'.

2007-12-12  Tomas Cerha  <cerha@brailcom.org>

	* sql/wiking.sql: The table and view for main menu management
	merged into the table and view for pages.

	* translations/wiking-cms.cs.po: Updated.

	* lib/wiking/cms.py (Menu): Removed.
	(Pages): Manage also menu position and global options.
	(Embeddable): New class for embedding module content in a page.
	(Rights): Removed.
	(Users): Manage also access rights.

	* lib/wiking/export.py: Don't use `modname' in node state.

	* lib/wiking/util.py (WikingNode.State): `modname' removed.

	* lib/wiking/handler.py: Don't pass `modname' to node state.

	* lib/wiking/__init__.py: Version changes to `0.4.4pre'.

	* lib/wiking/db.py: Added support for multiple layouts.  Actions
	`add', `edit' and `delete' implemented within `insert', `update'
	and `delete'.

	* lib/wiking/request.py (Request.set_param): New method.

2007-12-06  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py (Session._SESSION_KEY_LENGTH): New
	attribute replacing `_MAX_SESSION_KEY'.
	(Session._new_session_key): Generate cryptographically secure
	random numbers using `os.urandom'.

	* lib/wiking/request.py: Don't import `random'.

2007-11-30  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py (make_uri): Escape the resulting URI.

	* lib/wiking/request.py (FileUpload): Decode the uploaded file
	name and use only the last item if full path was passed by the
	browser.
	(Request): Decode the request uri.

	* lib/wiking/export.py (_node_uri): Use `generator.uri()' to
	escape the URI properly.

	* lib/wiking/db.py (PytisModule._validate): Expect just a relative
	filename from `FileUpload.filename()'.

	* lib/wiking/cms.py: Escape attachment URIs.

2007-11-29  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/user/accessibility.cs.txt: Generalized.

	* doc/src/user/accessibility.en.txt: Generalized.

2007-11-26  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py (DateTime, Date): Added support for
	suppressing leading zeros in the formatted date.

2007-11-25  Tomas Cerha  <cerha@brailcom.org>

	* sql/wiking.sql (session): New table.

	* lib/wiking/cms.py (Session): Allow multiple sessions for one
	account.

	* lib/wiking/request.py: Added support for secure cookies.

	* lib/wiking/modules.py: Added support for secure auth cookies and
	multiple sessions for one account.

2007-11-24  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/configuration.py: Minor docstring improvement.

	* lib/wiking/modules.py (CookieAuthentication.authenticate):
	Disable session cookie persistency.

2007-11-21  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/cms/_index.txt: 'Mapping' -> 'Menu'.

	* doc/src/cms/Panels.en.txt: Link fixed.

	* doc/src/cms/News.cs.txt: LCG documentation links updated. 

	* doc/src/cms/News.en.txt: LCG documentation links updated. 

	* doc/src/cms/Pages.cs.txt: LCG documentation links updated. 

	* doc/src/cms/Pages.en.txt: LCG documentation links updated. 

	* doc/src/cms/Planner.cs.txt: LCG documentation links updated. 

	* doc/src/cms/Planner.en.txt: LCG documentation links updated. 

	* doc/src/devel/application.py: Updated for latest LCG API.

	* doc/src/admin/config.py: Updated for latest LCG API.

	* lib/wiking/cms.py: Updated for latest LCG API.

	* lib/wiking/configuration.py: Updated for latest LCG API.

	* lib/wiking/export.py: Updated for latest LCG API.

	* lib/wiking/handler.py: Updated for latest LCG API.

	* lib/wiking/util.py: Updated for latest LCG API.

2007-11-20  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms.py: Cosmetic changes.

2007-11-10  Tomas Cerha  <cerha@brailcom.org>

	* sql/init.sql: Minor fix.

2007-11-01  Tomas Cerha  <cerha@brailcom.org>

	* translations/*.po: Updated.

	* lib/wiking/cms.py: Don't use double quotes in strings, which may
	be used in HTML attributes.

2007-10-31  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py (SubmenuRedirect): Prevent loop.

	* lib/wiking/util.py (Document.build.mknode): Convert identifier
	to str.

	* lib/wiking/request.py: Convert `uri' and `path' to unicode.

2007-10-29  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py (PytisModule): Added support for redirection.
	Allow the derived modules to prefer specification titles over menu
	item titles.

	* lib/wiking/util.py (Document): Pass the `globals' node option.

2007-10-26  Tomas Cerha  <cerha@brailcom.org>

	* sql/init.sql: New `Olive' theme added.

2007-10-25  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Added support for horizontal groups.

	* lib/wiking/util.py (FieldSet): New argument `horizontal'.

2007-10-24  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/admin/config.py (Reader._create_content): Pass expolicit
	`depth' to `lcg.TableOfContents'.

	* doc/src/devel/application.py (Reader._create_content): Pass
	expolicit `depth' to `lcg.TableOfContents'.

	* lib/wiking/db.py (PytisModule._link_provider): Make the
	`cid' argument positional.

	* lib/wiking/cms.py: Respect the above change.

	* lib/wiking/export.py: One more `div' for inner content.

	* resources/css/default.css: MSIE workarounds.

2007-10-22  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms.py (Panels): Use a display function with `row'
	argument.

	* resources/css/default.css: Form image display fixed.

2007-10-12  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Updated.

	* lib/wiking/util.py (send_mail): Catch smtp errors and return the
	error message if sending fails.

	* lib/wiking/cms.py (_Users.action_enable): Send e-mail
	notification to the enabled user.
	(_Users._redirect_after_insert): Handle `send_mail()' errors.
	(_Users.Spec.fields): Display overstriked registration date for
	users hwo are not enabled.
	(Planner, News): Use `ViewSpec.list_layout' instead of
	`self._LIST_LAYOUT'.
	(CMSModule._form): Disable list layout in WMI.

	* lib/wiking/db.py: Don't care about list layout here.  Use
	`lcg.LocaleData' instead of `lcg.datetime_formats()'.

2007-10-09  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py (send_mail): Make the html part optional.
	Convert text to utf-8.

	* lib/wiking/cms.py: Notify admin of new user registrations.
	Allow one-click account confirmation.

2007-10-05  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms.py: Use pytis styles to highlight unpublished menu items.

2007-10-04  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Allow form row style to override the
	default style.

	* lib/wiking/db.py: Generate automatic links also for `CbComputer' fields.

2007-10-02  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: Make it possible to prefill login name and
	password from request parameters.

2007-10-01  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: Distinguish image and link provider for form uris. 

	* lib/wiking/cms.py: Updated link and image providers.

	* lib/wiking/modules.py: Don't depend on `req.wmi'.

	* lib/wiking/handler.py: Minor comment improvement.

2007-09-26  Tomas Cerha  <cerha@brailcom.org>

	* Makefile (cvs-update): Overwrite locally modified files.

	* lib/wiking/handler.py (Handler.handle): Pass application to
	`Document.build'.

	* lib/wiking/util.py (Document.build): Supply application defined
	language variants if no language variants are defined for the
	document or its menu item.

2007-09-25  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms.py: Use `prefer_display' where necessary.

	* lib/wiking/db.py: Cosmetic improvements.

	* Makefile: Check python path before installation.

2007-09-24  Tomas Cerha  <cerha@brailcom.org>

	* Makefile: Allow repeated cvs-install.  Make translations for
	cvs-install.

	* lib/wiking/configuration.py
	(Configuration._Option_config_file.default): Prevent using .pyo file.

	* resources/css/default.css: Minor fieldset display improvement.

	* lib/wiking/modules.py (CookieAuthentication._auth_log): Renamed
	to `_auth_hook'.

	* lib/wiking/db.py (RssModule._rss_info): New method.
	(PytisModule.action_list): Use it.

2007-09-20  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/__init__.py: Minor import problem fixed.

	* lib/wiking/application.py: Use `req.done()' instead of `req.OK'.

	* lib/wiking/request.py: Unwanted dependency on apache fixed.

2007-09-19  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: Give higher precedence to resolution by key
	than by referer.  Improved support for inserting related records.

	* lib/wiking/util.py: Ignore menu item `variants' if they were not
	defined.

	* lib/wiking/modules.py (CookieAuthentication): Added support for
	loogging login attempts.

	* lib/wiking/cms.py: Give higher precedence to resolution by key
	than by referer.  Fixed problems with page and attachment
	relation.

2007-09-18  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/application.py (Application.handle_exception): Ignore
	IOError when client closes the connection.  Improved bugreport
	information.

2007-09-17  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/cms/cms.en.txt: `Mapping' -> `Menu'

	* doc/src/cms/Titles.en.txt: File removed.

	* doc/src/cms/Titles.cs.txt: File removed.

	* doc/src/cms/Mapping.en.txt: File removed.

	* doc/src/cms/Mapping.cs.txt: File removed.

	* lib/wiking/cms.py: New module `Menu' for improved main menu
	management, replacing the `Mapping' module in WMI.  The most
	important new features are independent publishing of menu items in
	different languages, menu item descriptions, and combined
	management of menu structure and menu titles.  Stylesheets now
	mapped statically.

	* lib/wiking/util.py: The support for languages and variants
	improved and documented to simplify its usage within the
	application.

	* lib/wiking/modules.py: Don't care about language and variants
	where not necessary.

	* lib/wiking/handler.py: Authentication error handling
	simplified.  Pass the request to `Document.build()'.

	* lib/wiking/db.py: Language and variants handling simplified.

	* sql/wiking.sql: New menu management support implemented.
	
	* sql/init.sql: Updated.
	
	* resources/css/default.css: Updated.
	
2007-09-12  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms.py: Added support for correct link name
	substitution in WMI page preview.  Display page management
	controls outside WMI.

	* lib/wiking/db.py: Allow resolution by key to support forms
	outside WMI.  Improved actin menu display outside WMI.

	* lib/wiking/util.py (ActionMenu): Added support for alternative
	appearance outside WMI.

	* resources/css/default.css: Updated.
	
2007-09-11  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py: WMI dependant code reduced.

	* lib/wiking/cms.py: Resolve records by referer even in WMI.

	* lib/wiking/util.py (make_uri): Minor improvement.

	* resources/css/default.css: Updated.
	
2007-09-10  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/db.py (PytisModule._action_args): WMI resolution
	moved to `CMSModule._resolve()'.  Use `pytis.web.ListView' instead
	of the previous implementation from `util' and define the layout
	by `_LIST_LAYOUT', not `_CUSTOM_VIEW'.  Always use the action
	`view' instead of combining `view' and `show'.

	* lib/wiking/util.py (ListView): Moved to `pytis.web'.  
	(ActionMenu): Add referer to uri explicitly.

	* lib/wiking/cms.py: `_auth_check()' -> `_auth_check_password()'.
	Allow page owner assignment.  Assign all privilegs to page owner.
	Always use the action `view' instead of combining `view' and
	`show'.  `_CUSTOM_VIEW' replaced by `_LIST_LAYOUT'.
	(Attachments): Link to page, not the mapping item in the table.
	Fixed attachment download filename within WMI.
	(CMSModule._resolve): Define the WMI specific resolution here.

	* lib/wiking/modules.py: `_auth_check()' ->
	`_auth_check_password()'.  Always use the action `view' instead of
	combining `view' and `show'.

	* sql/wiking.sql: Added `owner' column for each mapping item.

	* resources/css/default.css: Updated.
	
2007-09-07  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Updated.
	
	* doc/src/devel/application.py: Include method arguments.

	* lib/wiking/cms.py: Define the menu and panels just within the
	application.  Suppress parent item links in mapping table.

	* lib/wiking/handler.py: Always use the application to query for
	menu and panels.

	* lib/wiking/modules.py: Dropped support for per-module menu and
	panels definition.

	* lib/wiking/util.py: Added support for the `active' flag on
	nodes.  Dropped support for `inline' state.

	* lib/wiking/export.py: Always show documentation "inline".
	Validation improvements.  Minor improvements for textual browsers.

	* lib/wiking/db.py: Don't pass the `inline' parameter in
	documentation link.

	* lib/wiking/application.py: Allow easy stylesheet redefinition.

2007-09-06  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/application.py (Application.panels): Display password
	expiration date in the login panel if it was defined.

	* lib/wiking/request.py: Added support for password expiration
	date specification.

	* translations/wiking-cms.cs.po: Updated.

	* translations/wiking.cs.po: Updated.

2007-09-05  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py (SubmenuRedirect): New class.

2007-09-04  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms.py: Authorization checking implemented within the
	new mechanism.

	* lib/wiking/export.py: Avoid invalid link to
	`_wmi/Documentation'.

	* lib/wiking/util.py: Custom view export bug fixed.

	* lib/wiking/api.py: All modules transformed into just one class
	`Application' and moved to `application.py'.

	* lib/wiking/application.py: New file.

	* lib/wiking/modules.py: Use just `Application' instead of former
	API modules.
	(RequestHandler, ActionHandler): Check authorization before
	handling the request.

	* lib/wiking/handler.py: Use just `Application' instead of former
	API modules.  

	* lib/wiking/db.py: Use just `Application' instead of former API
	modules.  Authorization support removed in favor of the new
	generalized implementation in base module classes.

	* lib/wiking/request.py (Request): Expect the current application
	as a constructor argument.

        * doc/src/devel/_index.txt: Updated.
	
        * doc/src/devel/api.py: Transformed into `application.py'.
	
        * doc/src/devel/application.py: New file.
	
        * doc/src/devel/devel.en.txt: Updated.
	
        * doc/src/devel/modularization.en.txt: Updated.
		
2007-09-03  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/__init__.py: Imports reordered.

	* lib/wiking/cms.py: Define CMS specific roles here.

	* lib/wiking/db.py: Authorization checking simplified.

	* lib/wiking/request.py: Define `User' and `Roles' here.

	* lib/wiking/util.py: `User' and `Roles' moved to `request'.

2007-08-31  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms.py: Fixed exception handling.

	* lib/wiking/__init__.py: Don't import `cgitb' here.

	* lib/wiking/api.py: Import `cgitb' here.

	* lib/wiking/modules.py: Fixed a bug in documentation path
	handling.

2007-08-29  Tomas Cerha  <cerha@brailcom.org>

	* sql/init.sql: Don't insert 'panels.css' in styles.

2007-08-28  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Minor fix.

	* sql/init.sql: Yellow color theme added.

	* lib/wiking/modules.py (RequestHandler._base_uri): New method.

	* lib/wiking/db.py: Do without 'Mapping.modtitle'.  Allow better message
	customization on insert, update and delete.
	(PytisModule._identifier): Method replaced by
	`RequestHandler._base_uri()'.

	* lib/wiking/cms.py: Menu creation optimized.  Use
	`self._base_uri()' instead of `self._identifier()'.  Installation
	fixed.  Use a different message when page is saved and published.

	* lib/wiking/api.py (Mapping.modtitle): Method removed.

2007-08-27  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py: Constructor argument 'resolver'
	removed.  Methods `panels' and amenu' moved to `RequestHandler'.

	* lib/wiking/handler.py: Added support for modularized exception
	handling.  Minor request processing optimizations.  Allow
	configuration options to be overriden in apache configuration
	file.

	* lib/wiking/api.py (ErrorHandler): New module.

	* lib/wiking/request.py (Request): API cleaned.

	* lib/wiking/install.py: File removed.

	* lib/wiking/db.py: Added support for title templates.
	(PytisModule): Process the `resolver' constructor arg in this
	class.

	* lib/wiking/cms.py: Use title templates.
	(ErrorHandler): New module.  CMS installation moved here.

	* lib/wiking/util.py: Delete action menu args fixed.

2007-08-24  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: Use the 'search' argument for the "list"
	action button.

	* lib/wiking/cms.py (Planner._condition): Accept the request argument. 

	* lib/wiking/db.py: Pass the request object to the module's
	`_condition()' method.
	(PytisModule.action_insert): Fixed a bug with uid access.

2007-08-23  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms.py: Prefer NotAcceptable error message to
	Forbidden if there is at least one language variant published.
	Allow 'Roles.AUTHOR' to enter WMI, but not publish changes in
	pages.

	* lib/wiking/request.py: Defive from pytis request API
	specifications and implement their interface.

	* lib/wiking/util.py (FileUpload): Class removed.
	(make_uri): Ignore arguments with None value.

	* Makefile: Pass -dP to cvs update.

	* lib/wiking/db.py: Respect changes in pytis forms.
	(PytisModule._prefill, PytisModule.action_list): Don't raise error
	when unable to determine prefered language.

2007-08-22  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/cms.py: Use `upload_limit' and allow its modification
	in WMI.

	* lib/wiking/configuration.py: New option `upload_limit'.

	* sql/wiking.sql: New field for `upload_limit'.

	* translations/wiking-cms.cs.po: Updated.

	* translations/wiking.cs.po: Updated.

	* lib/wiking/db.py: Omit binary values in form prefill.

	* resources/css/default.css: Minor improvement.

	* lib/wiking/request.py (WikingRequest.user): Avoid using
	try/except blocks.

	* lib/wiking/modules.py (CookieAuthentication): Allow request
	access in derived classes.

2007-08-21  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking-cms.cs.po: Updated.

	* sql/wiking.sql: Added page title column defaulting to page
	identifier.

	* lib/wiking/cms.py: Use page title as database column, not virtual.

2007-08-20  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/cms/Pages.cs.txt: Updated.

	* doc/src/cms/Pages.en.txt: Updated.

	* lib/wiking/cms.py: Simplified page publication control.

	* lib/wiking/db.py: Allow custom EditForm submit buttons per module.

	* lib/wiking/util.py (ActionMenu): Delete action hack fixed.

	* sql/wiking.sql: Respect `published' in page insert rule.

	* translations/wiking-cms.cs.po: Updated.

	* translations/wiking.cs.po: Updated.

2007-08-17  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/configuration.py: Configuration file lookup fixed to
	avoid using the `pyc' file.

	* lib/wiking/cms.py: Make use of new method for tree emulation in
	pytis forms.

	* lib/wiking/db.py: Respect changes in pytis form classes and
	support long list browsing and sorting.

	* resources/css/default.css: Form styles modified according to
	changes in form export.

	* lib/wiking/util.py: Default color theme improved. 
	(_CustomView._export_row_custom): Respect changes in parent class.
	(get_module): Use `wiking.cms' only if `wikingmodules' really
	don't exist, not if there is a problem loading them.

2007-08-15  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: New and updated styles for pytis
	forms.

	* lib/wiking/db.py: Don't pass rows to list forms directly, just
	pass the condition and let the form do the select.  Pass paging
	arguments to list forms.

	* lib/wiking/cms.py (Config.Spec): Respect changes in pytis
	`Configuration' interface.
	(Planner._condition): Respect the changed interface of this method
	in parent class.

	* lib/wiking/export.py: Export menu only if there are items.

	* lib/wiking/util.py (ListView._wrap_exported_rows_custom):
	Respect the change in parent class.

	* doc/src/user/navigation.cs.txt: Conflicting anchor names changed.

	* doc/src/user/navigation.en.txt: Conflicting anchor names changed.

	* doc/src/user/navigation.pl.txt: Conflicting anchor names changed.

2007-08-10  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py (DocumentHandler._document): Hardcoded
	documentation subdirectories updated.

	* doc/src/devel/_index.txt: New file.
	
	* doc/src/devel/modularization.en.txt: New file.

	* lib/wiking/configuration.py: Docstrings improved.

	* doc/src/cms/Attachments.cs.txt: New file.

	* doc/src/cms/Attachments.en.txt: New file.

	* doc/src/cms/Languages.cs.txt: New file.

	* doc/src/cms/Languages.en.txt: New file.

	* doc/src/cms/Mapping.cs.txt: New file.

	* doc/src/cms/Mapping.en.txt: New file.

	* doc/src/cms/News.cs.txt: New file.

	* doc/src/cms/News.en.txt: New file.

	* doc/src/cms/Pages.cs.txt: New file.

	* doc/src/cms/Pages.en.txt: New file.

	* doc/src/cms/Panels.cs.txt: New file.

	* doc/src/cms/Panels.en.txt: New file.

	* doc/src/cms/Planner.cs.txt: New file.

	* doc/src/cms/Planner.en.txt: New file.

	* doc/src/cms/Stylesheets.en.txt: New file.

	* doc/src/cms/Themes.en.txt: New file.

	* doc/src/cms/Titles.cs.txt: New file.

	* doc/src/cms/Titles.en.txt: New file.

	* doc/src/cms/_index.txt: New file.

	* doc/src/cms/cms-intro.en.txt: New file.

	* doc/src/cms/cms.en.txt: New file.

	* doc/src/admin/_index.txt: New file.

	* doc/src/admin/apache.en.txt: New file.

	* doc/src/admin/config.py: New file.

	* doc/src/admin/install.en.txt: New file.

	* INSTALL: Updated.

	* doc/src/_index.txt: New sections added.

	* doc/src/index.en.txt: Updated.

	* doc/src/intro.en.txt: File removed.  Contents moved to CMS section.

2007-08-08  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py: Modules `CookieAuthentication' and
	`Session' from `wiking.api' moved here.

	* lib/wiking/db.py (RssModule.action_rss): Configuration usage fixed.

	* lib/wiking/api.py: Some documentation added, some updated.
	Implementing classes moved away.

	* lib/wiking/__init__.py: Don't update module's private variables.
	Remove pytis config module from globals after it's use.

	* doc/src/devel/devel.en.txt: More documentation added.

	* doc/src/devel/api.py: Generate lists of interface methods and
	their documentation, as well as module's global docstring.

	* TODO: Updated.

2007-08-07  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/devel/devel.en.txt: New file.

	* doc/src/devel/api.py: New file.

	* doc/src/intro.en.txt: Added notes about the Wiking development
	platform and links to developer's documentation.

	* doc/src/_index.txt: `devel' section added.

	* sql/wiking.sql (config): `login_panel' -> `show_login_panel'.

	* translations/wiking-cms.cs.po: All translations filled.

	* lib/wiking/cms.py (Config): Use description and documentation of
	the configuration options within field specifications.

	* lib/wiking/configuration.py: Documentation for most options
	written.  `login_panel' -> `show_login_panel'.

	* lib/wiking/export.py: `cfg.login_panel' -> `cfg.show_login_panel'.

	* lib/wiking/api.py: `cfg.login_panel' -> `cfg.show_login_panel'.
	(Panels): Documentation added.
	

2007-08-03  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/admin/News.en.txt: Minor improvement.

	* doc/src/admin/Modules.cs.txt: File removed.

	* doc/src/admin/Modules.en.txt: File removed.

2007-08-02  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Updated

	* lib/wiking/configuration.py: All configuration options defined here.

	* lib/wiking/request.py: Handle exceptions when loading mod_python.

	* lib/wiking/util.py (Theme): New class.
	(WikingNode.State): New class.
	(import_modules): Method removed.
	(get_module): The algorithm changed to allow `wikingmodules'
	override Wiking CMS modules.

	* lib/wiking/__init__.py: Import the new modules and update
	globals of all modules.

	* lib/wiking/module.py: Module removed.

	* lib/wiking/handler.py: Use global configuration and initialize node `state'.

	* lib/wiking/export.py: Use global configuration and node `state'.

	* lib/wiking/cms.py: New file - all CMS related code moved here.
	
	* lib/wiking/modules.py: All generic module definitions except for
	database related modules moved here.

	* lib/wiking/db.py: New file - all pytis database related module
	definitions moved here.

	* translations/wiking.cs.po: CMS translations moved to a separate file. 

	* translations/wiking.es.po: CMS translations moved to a separate file. 

	* translations/wiking.pl.po: CMS translations moved to a separate file. 

	* translations/wiking-cms.pl.po: New file.

	* translations/wiking-cms.es.po: New file.

	* translations/wiking-cms.cs.po: New file.

	* translations/Makefile: Generate also translations for the new
	domain `wiking-cms'.

2007-08-01  Tomas Cerha  <cerha@brailcom.org>

	* sql/wiking.sql: New theme color.

2007-07-13  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py: Authentication documentation written.
	Make password checking extensible.

	* doc/src/admin/admin.en.txt: Updated.

	* lib/wiking/configuration.py: New option `translation_paths'.

	* lib/wiking/util.py: Use it.
	(User) Don't care about password.

2007-07-12  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/module.py (PytisModule._action_menu): Only use Wiking
	actions.

	* lib/wiking/install.py: Minor improvement.

	* lib/wiking/request.py: Added support for authentication modularization.

	* lib/wiking/modules.py: Added support for authentication
	modularization.  Added classes implementing basic system modules
	independent of CMS modules.

	* lib/wiking/handler.py: Added support for authentication modularization.

	* lib/wiking/util.py (User): New class.
	(Roles.check): Expect a `User' instance as argument.

	* lib/wiking/export.py: Expect a `User' instance.

2007-06-29  Tomas Cerha  <cerha@brailcom.org>

	* sql/wiking.sql: Table `modules' removed.  Refer to modules by
	name in other relations (not by mod_id).

	* sql/init.sql: Don't initialize the table `modules'.

	* resources/css/default.css: Minor improvement.

	* lib/wiking/modules.py: Recognize installed modules
	automatically.  
	(Modules): Module removed.

	* defs/application.py: Use `WikingFileResolver'.

	* config.py: Don't set Pytis option `db_encoding'.

	* lib/wiking/__init__.py: Don't set Pytis option `db_encoding'.

2007-06-13  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/handler.py: Allow resolver redefinition in configuration.

	* lib/wiking/module.py: Make specification creation easily overridable.

	* lib/wiking/modules.py: Updated.  Make use of the new
	`lcg.SelfTranslatableText' class.

	* lib/wiking/util.py: Define a custom 'Specification' class.
	Added support for file-based resolvers.

	* resources/css/default.css: Main menu id changed.

	* lib/wiking/export.py: Avoid duplicit anchor name.  Compute the
	default value of `webmaster_address' id None.

2007-06-12  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/handler.py: Unecessary Apache site dispatching
	cleaned up.
	(Handler._module): Allow passing additional module constructor arguments.

2007-06-08  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: Set the correct title for the current node.

	* translations/wiking.cs.po: Updated.

	* lib/wiking/modules.py: Minor improvements.

	* lib/wiking/module.py: Don't reload the record from the database
	within `_update()' to allow overriding it correctly.

	* doc/src/user/accessibility.en.txt: Updated.

	* doc/src/user/navigation.cs.txt: Updated.

	* doc/src/user/navigation.en.txt: Updated.

	* resources/css/default.css: Hide breadcrumbs by default.

	* lib/wiking/export.py: Added breadcrumb navigation.

2007-06-07  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.cs.po: Updated.

	* lib/wiking/handler.py: Don't care about the panel styles.

	* lib/wiking/export.py: Accessibility improvements.

	* resources/css/panels.css: File removed.

	* resources/css/default.css: Improved.  Panel styles merged here.

2007-06-05  Tomas Cerha  <cerha@brailcom.org>

	* sql/wiking.sql: Page insert rule fixed.

	* lib/wiking/__init__.py: Version number increased.

	* lib/wiking/util.py: Site map support added.

	* lib/wiking/modules.py (Mapping): View as a `site map'.
	(Modules.Spec._ModNameType._check_constraints): Pass all keyword
	arguments to the parent method.

	* lib/wiking/module.py: RSS fixed.

2007-06-01  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.cs.po: Updated.

	* sql/init.sql: Updated.

	* lib/wiking/modules.py: Improved system module recognition.

	* lib/wiking/module.py: Fixed incompatibility with latest Pytis version.

	* lib/wiking/export.py: Local menu link added.

2007-05-24  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Updated.

	* lib/wiking/util.py: Added support for hierarchical navigation.
	Updated for the new LCG interface.

	* translations/wiking.cs.po: Updated.

	* sql/wiking.sql: Added support for hierarchical page structure.

	* lib/wiking/modules.py: Added support for hierarchical navigation
	in WMI.  Use LCG node structure directly for menus.
	(Mapping): Added support for definition of page hierarchy.

	* lib/wiking/module.py: Added support for hierarchical module
	listings.

	* lib/wiking/handler.py: Removed special handling of documentation
	and WMI requests thanks to better modularization.

	* lib/wiking/export.py: Added basic support for hierarchical
	navigation.

2007-05-23  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/modules.py (Search._result_page): Set language for
	the document.

2007-05-21  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/modules.py (Search._search_form): Return the document
	in the right language.

2007-05-18  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/modules.py (Search._transform_input): Be more careful
	about content of the input.

2007-05-18  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/handler.py (SiteHandler.__init__): Get Exporter from
	the Config module.

	* lib/wiking/modules.py (Config.Configuration): New attribute
	`exporter'.
	
2007-05-17  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/modules.py (Search._transform_input): Use AND search
	rather then OR search.

2007-05-17  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/modules.py (Search): Print a message if nothing is
	found.

2007-05-17  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/handler.py: Use module qualification with the
	Exporter class.

2007-05-15  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/modules.py (Search): New module.

2007-05-03  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/util.py (send_mail): Put timezone into date.

2007-05-02  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/module.py (RssModule.action_rss): If uri is not
	given, make it an empty string, not None.

2007-05-01  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/module.py (RssModule._descr_provider): New method.

2007-04-18  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/handler.py: Dispose module instances after reloading
	a module.

	* lib/wiking/module.py: Module creation logging moved to the base
	`Module' class.

2007-04-17  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py: Don't skip to panels when they are hidden.

	* lib/wiking/modules.py: Cosmetic improvements (source code wrap
	limit extended to 100 columns).

2007-04-13  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py (Exporter.ctrl): Obey the new config option
	`allow_login_ctrl'.

	* lib/wiking/modules.py: Fixed a problem with unknown registration
	URI in login panel.  Allow suppression of login ctrl through
	configuration.

2007-04-12  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.cs.po: Updated.

	* lib/wiking/util.py (LoginCtrl): New class.

	* lib/wiking/modules.py (Panels.panels): Add a login panel
	automatically if it is configured.
	(Users): Don't display user listing after registration.  Display
	further information instead.
	(Mapping.resolve): Allow new user registration even if the `Users'
	module is private.

	* lib/wiking/handler.py: Removed unecessary `config' settings.

	* lib/wiking/export.py: Don't create the login panel here, just
	expect it in `panels'.

2007-04-11  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/admin/Mapping.en.txt: Updated.
	
	* doc/src/admin/Mapping.cs.txt: Updated.

	* sql/wiking.sql: Added support for private items.

	* resources/css/default.css: Yet another MSIE hack. 

	* lib/wiking/modules.py: Accept also custom modules
	defined in `wikingmodules'.
	(Mapping): Added support for private items.

	* lib/wiking/handler.py: Use the changed `Mapping'
	interface.

2007-04-04  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.cs.po: Updated.

	* lib/wiking/export.py: Show login controls in wiking bar when
	wiking panel is off.

	* lib/wiking/handler.py: Handle exceptions in exception processing.
	Handle int as a valid handler return value.

	* lib/wiking/request.py: Don't prefill the login name to allow
	browser based login/password management.  Session cookie
	expiration further extended.  Added support for HTTP redirection.
	Unset session cookie after logout.

	* sql/wiking.sql: Removed oid columns.  Table users moved to the
	beginning of the file.  Expect `image_id' in the inserted row.
	Fixed attachment insert rule.  New config option
	`force_https_login'.
	
	* lib/wiking/__init__.py: Version number increased to 0.4.2.

	* lib/wiking/modules.py (Images): Compute sequence fields.
	(Users): Don't set current user as the record owner.
	(Attachments): Use `Request' support for HTTP redirection.
	(Config): New option `force_https_login'.
	(Attachments): Added DB exception matcher.

	* lib/wiking/module.py (PytisModule._insert): Set new row only
	when it is not None.  Allow a module to disable automatic record
	owner setting.

2007-04-03  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/admin/Attachments.cs.txt: New file.

	* doc/src/admin/Attachments.en.txt: New file.

	* doc/src/admin/Pages.cs.txt: New section about attachments.

	* doc/src/admin/Pages.en.txt: New section about attachments.

	* lib/wiking/handler.py (SiteHandler.handle): Never call
	`req.user()' outside the exception handling block.

	* lib/wiking/export.py: Don't link to WMI module.

	* sql/wiking.sql (themes) New colors.
	(news, planner): Added author references.

	* resources/css/default.css: Updated.

	* lib/wiking/request.py (Request.result): Encode the returned data
	only if it is a unicode instance.
	(WikingRequest._perform_login): Extend session cookie expiration time.

	* lib/wiking/util.py: Improved custom views and thier specification.

	* lib/wiking/modules.py (Attachments): List fields accepted out of
	layout.
	(Themes.COLORS): New symbolic colors.
	(News, Planner): Added author information.  Allow insertion by
	CONTRIBUTOR.  Updated for new `CustomViewSpec'.
	(WikingManagementInterface): Switch to WMI mode only after
	successful authorization.

	* lib/wiking/module.py: Supply record owner on insertion.
	Validate only layout fields and fields explicitly listed.  Added
	support for codebook field links.
	(RssModule): Use real author column.
	(PytisModule._validate): Use only the last part of an uploaded
	file path (from MS windows).

2007-04-02  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/admin/Mapping.cs.txt: Updated.

	* doc/src/admin/Mapping.en.txt: Updated.

	* doc/src/admin/Panels.cs.txt: Updated.

	* doc/src/admin/Panels.en.txt: Updated.

	* lib/wiking/export.py: Display item descriptions.

	* translations/wiking.cs.po: Updated.

	* resources/css/default.css: Minor improvements.

	* lib/wiking/util.py (Roles.check): Allow privileg checking
	without raising an error.
	(MenuItem): Added support for item descriptions.

	* lib/wiking/modules.py: Added short module descriptions.  Use
	roles and custom actions in the modules `Users' and `Rights'.
	Added field descriptions for `Panels'.  Supply WMI menu item
	descriptions.

	* lib/wiking/module.py: Implemented the `OWNER' role authorization
	check.  Show only authorized actions in the action menu.  Show
	actions also outside WMI.  Allow easier action menu redefinition.

2007-03-30  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.cs.po: Updated.

	* sql/wiking.sql: Removed rowlocks and oids.  Fixed rules for
	`attachments'.  Added `published' into `pages'.

	* lib/wiking/modules.py: Allow publishing/unpublishing pages
	directly.  Added action descriptions.  Support pytis returning the
	inserted row in the Attachments module.  Redirect after attachment
	operations.

	* lib/wiking/module.py: Added action descriptions.  Implemented
	sequence value generation before insert to support pytis returning
	the inserted row.

	* lib/wiking/util.py (ActionMenu): Show action description as link
	title.
	(Roles.check): Don't raise the error here, leave it up to
	`Request.user()'.
	

	* lib/wiking/request.py (Request.set_header): New method.
	(WikingRequest.user): New argument `raise_error'.  Announce
	session timeout.

2007-03-29  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.cs.po: Updated.

	* lib/wiking/modules.py: Added many field descriptions.
	(Mapping.menu): Expect the request as first argument.

	* lib/wiking/handler.py (SiteHandler.handle): Login before mapping
	resolution.  Pass request to Mapping.menu().

	* lib/wiking/util.py (Forbidden): New HTTP errror type.

2007-03-27  Milan Zamazal  <pdm@brailcom.org>

	* lib/wiking/util.py (send_mail): Don't write the HTML part if
	it is empty.

2007-03-26  Tomas Cerha  <cerha@brailcom.org>

	* translations/Makefile: Don't assume LCG path, use it as a Python
	library.

	* lib/wiking/modules.py (Config.Configuration): New option
	`allow_wmi_link'.
	(_modtitle): Use `get_module' to get the module class.

	* lib/wiking/export.py: Don't produce WMI link unless
	`config.allow_wmi_link' is True.

2007-03-17  Tomas Cerha  <cerha@brailcom.org>

	* sql/init.sql: Supply all mandatory fields for the default admin.
	Assign `mod_id' into the default mapping by module name.
	
	* translations/wiking.cs.po: Updated.

	* sql/wiking.sql: New theme column for `help'.  New config option
	`allow_registration'.

	* resources/css/default.css: Updated.

	* lib/wiking/request.py: Perform authentication on demand.

	* lib/wiking/util.py (Roles.check): Check authentication only when
	it is really needed.  Minor improvements.

	* lib/wiking/modules.py: Use the new RegexString data type for
	certain fields.  Allow authentication on demand.  Many minor
	improvements in field specifications.  Added a few field
	descriptions.  Disable table layout for the `Users' module.
	Use the new support for `FieldSet'.

	* lib/wiking/module.py: Added support for disabling table layout
	in forms on a per-module basis.  Other minor improvement.

	* lib/wiking/handler.py: Enforce authentication within the
	RequestError handling block.

	* lib/wiking/export.py: Display registration link in the login panel.

2007-03-16  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Added style for `not-null' signs.

	* lib/wiking/handler.py: Catch RequestErrors also for Mapping lookup.

	* lib/wiking/module.py (PytisModule._link_provider): Return 'None'
	if the module identifier is not known.

	* sql/init.sql: Added the new modules into the list of available
	modules.

	* lib/wiking/modules.py: Use the new role assignment mechanism and
	define some basic privilegs for all actions.

	* lib/wiking/util.py: Avoid passing the `command' in login dialog.
	(Roles): New class for static user role definition.
	(get_module): Try importing `wikingmodules' first and
	`wiking.modules' only if `wikingmodules' were not found.

	* lib/wiking/configuration.py: Search also for the module
	`wikingconfig' as the default configuration file.

2007-03-15  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.cs.po: New translations.

	* sql/init.sql: Create initial admin account.

	* lib/wiking/handler.py: Updated request error handling.

	* lib/wiking/install.py: Announce the default admin username and
	password after successful install.

	* lib/wiking/modules.py: New module for rights management.  New
	module for static user roles definition.  Require admin privileges
	in WMI.

	* lib/wiking/util.py: New and improved exception classes for
	request errors.

	* lib/wiking/module.py: Added support for password validation.
	Fixed boolean value validation.

	* lib/wiking/request.py: Fixed multivalue parameter
	initialization.  Use the new exception classes for authentication
	errors.

	* lib/wiking/export.py: Login panel fix.

2007-03-14  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py: Reflect the base class refactoring.
	Added documentation.
	(Documentation, WikingManagementInterface): New modules.
	(Mapping): Added static mapping for `_wmi' and `_doc'.

	* lib/wiking/module.py: Refactored: Define only the most basic
	interface in the base class, move all Pytis related functionality
	to `PytisModule', isolate action dispatching to `ActionHandler'.

	* lib/wiking/export.py: Respect the node config option change.

	* lib/wiking/handler.py: Pass module constructor arguments
	according to its type.  Don't handle documentation or WMI requests
	here, rely on their (new) modules.  Added more documentation.
	Cleaned up.

2007-03-12  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: Support LCG resources and use don't
	implement custom stylesheet passing.

	* lib/wiking/modules.py: Generate page attachments and stylesheets
	as the corresponding `Resource' instances.

	* lib/wiking/module.py: Pass keyword arguments to `Document'
	constructor.  Allow link generation depending on the target
	component which uses the link.
	
	* lib/wiking/handler.py: Expect `lcg.Stylesheet' instances from
	`Stylesheets.stylesheets()'.  Use `Exporter.export()' instead of
	`Exporter.page()'.

	* lib/wiking/export.py: Rely on superclass to include stylesheet
	links in the header.

2007-03-08  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: Use LCG's generator instead of the `_html'
	module.

	* lib/wiking/modules.py: Don't use LCG's `_html' module.

	* lib/wiking/module.py: Don't use LCG's `_html' module.

	* lib/wiking/handler.py: Expect LCG content from `HttpError.msg()'
	not HTML directly.

	* lib/wiking/export.py: Use LCG's generator instead of the `_html'
	module.

2007-03-07  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py: Use named substitutions in translatable
	texts instead of positional.

	* sql/wiking.sql: Added tables, views and rules supporting the
	`Attachments' module.

	* lib/wiking/util.py: Action menu constructor arguments changed.
	Use named substitutions in translatable texts instead of
	positional.

	* lib/wiking/modules.py: Use the `action_' prefix for all action
	methods.  Minor fixes.  List attachments at the bottom of a page.
	Resolve attachments by page identifier and filename.

	* lib/wiking/module.py: Fixed DB exception matching.  New URI
	scheme in WMI.  Use the `action_' prefix for all action methods.
	Added support for "related" modules -- records of another module
	depending on the current record of the current module.  Added
	support for module redirection.  Use new `lcg' content
	constructors.

	* lib/wiking/handler.py: Use the `action_' prefix for all action
	methods.  Use `req.path'.  Added support for module redirection.

2007-03-05  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/handler.py: Don't perform identifier/module name
	caching here -- leave it up to the `Mapping' module.

	* lib/wiking/modules.py: Perform caching of module identifier/name
	assignments (for request resolution).  New module `Attachments'.

	* lib/wiking/export.py: Removed duplicit anchor name.

2007-03-04  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/util.py: Many docstrings added.

2007-03-02  Tomas Cerha  <cerha@brailcom.org>

	* Makefile: Added `cvs-install' option.

	* lib/wiking/install.py: Use psycopg directly.

	* lib/wiking/util.py: Removed support for `edit_label'...

	* lib/wiking/request.py: Minor fix.

	* lib/wiking/module.py: Generic support for saving binary data in
	files.  Major rewrite of URI construction.  Other minor
	improvements.
	(Module): 

	* lib/wiking/handler.py: Minor enhancements.

	* lib/wiking/configuration.py: New option `storage'.

	* lib/wiking/modules.py: Comment improved.

2007-02-26  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/handler.py: Current module and record resolution
	simplified and unified.

	* lib/wiking/module.py: Database modification methods separated
	from their action handlers.  Current record abstraction
	refactored.

	* lib/wiking/modules.py: Respect the above changes.

2007-02-23  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Updated.

	* sql/wiking.sql: Added table for storing image information.

	* lib/wiking/util.py: Added classes supporting file upload
	abstraction and custom view support.

	* lib/wiking/request.py: Added support for file upload handling.

	* lib/wiking/modules.py: Universal mixin classes moved to
	`module.py'.  Use the new custom view support.  New module `Images'.

	* lib/wiking/module.py: Custom view support refactored.  RSS and
	panelization support separated to derived classes.  Validation
	extended to support binary data types.

	* lib/wiking/install.py: Updated for `dbapi' pytis interface.

2007-02-02  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/module.py (WikingModule._validate): Treat
	`view.check()' result as a sequence.

2007-01-19  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/module.py (WikingModule._validate)
	(WikingModule._get_row_by_key): Use only the last value of the
	parameter, it it is a tuple.

	* lib/wiking/request.py (Request._init_params.init_value): New
	function.
	(Request._init_params): Use it.

2007-01-18  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Added MSIE workaround for
	invisible floated images.

2007-01-16  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/module.py (WikingModule.rss): Translate `title' and
	`descr' fields before escaping.

2007-01-15  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/export.py (Exporter.ctrl): Only use `config.module'
	if it is available.

2007-01-14  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.*.po: Updated.

	* lib/wiking/install.py: Add a button for initializing the
	database after its creation.

	* sql/init.sql: Modified according to the new DB schema.

	* doc/src/admin/Pages.cs.txt: New file.

	* doc/src/admin/Pages.en.txt: New file.

	* lib/wiking/export.py (Exporter._wiking_bar): Let the WMI link
	point directly to the current module.

	* lib/wiking/handler.py (SiteHandler.handle): Add the current
	module to node config.

	* lib/wiking/module.py (WikingModule.name): New class method.
	(WikingModule.Object.__str__, WikingModule.spec) 
	(WikingModule.__init__, WikingModule._real_title) 
	(WikingModule._link_provider, WikingModule.list): Use it.

	* doc/src/admin/Content.en.txt: File removed.

	* doc/src/admin/Content.cs.txt: File removed.

2007-01-12  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py (Themes.COLORS): New colors for inactive
	buttons.
	(Content): Class significantly redesigned and renamed to `Pages'.
	(Pages.view): New keyword argument `preview'.
	(Pages.preview): New method.
	(Pages._ACTIONS): New action `preview'.

	* defs/application.py: `Content' -> `Pages'.

	* lib/wiking/module.py: 'pytis.web' -> `pw'.
	(WikingModule._DEFAULT_ACTIONS): Split to `_DEFAULT_ACTIONS_FIRST'
	and `_DEFAULT_ACTIONS_LAST'
	(WikingModule._INSERT_MSG, WikingModule._UPDATE_MSG)
	(WikingModule._DELETE_MSG, WikingModule._LIST_ACTIONS): New
	constants.
	(WikingModule.Object.update): New method.
	(WikingModule.spec): Avoid repeating actions.  Also process
	actions of the current class.
	(WikingModule._validate): Skip key columns only if not `new'.
	(WikingModule._document): Always supply all languages as variants
	in WMI.
	(WikingModule._actions): Return `ActionMenu' instance.
	(WikingModule.list, WikingModule.show, WikingModule.remove): Use
	`self._actions' in its new meaning.
	(WikingModule.insert): Use `self._INSERT_MSG'.
	(WikingModule.update): Use `self._UPDATE_MSG'.
	(WikingModule.delete): Use `self._DELETE_MSG'.
	(WikingModule.update): Fix.

	* lib/wiking/handler.py (SiteHandler.handle): 'Content' -> `Pages'.

	* lib/wiking/__init__.py (__version__): Import `pytis.web' as `pw'.

	* lib/wiking/util.py (ActionMenu.__init__): Expect a
	`PresentedRow' instance as the `row' argument.
	(ActionMenu._export_item): Set the `inactive' class for inactive
	items.

	* sql/wiking.sql: Table `_content' and view `_content' replaced by
	a redesigned table _`pages' and view `pages' and corresponding
	rules.  New columns for inactive button colors in the table
	`themes'.

	* resources/css/default.css: Added styles for inactive action buttons.

2007-01-09  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/module.py (WikingModule._RSS_DESCR_COLUMN): New
	constant.
	(WikingModule.rss): Don't overwrite the base uri in the cycle.
	Supply values for additional RSS tags.

	* lib/wiking/modules.py (News.Spec.fields): Removed field `rss_title'.
	(News.Spec._rss_title): Method removed.
	(News._RSS_TITLE_COLUMN): Set to `title'
	(News._RSS_DATE_COLUMN): New constant.
	(Planner._RSS_DATE_COLUMN, Planner._RSS_TITLE_COLUMN): New constants.

	* lib/wiking/util.py (rss): New keyword arguments `lang' and
	`webmaster'.  Additional values `author' and `date' in items.
	Support also `generator', `ttl' and `guid' elements.

2007-01-08  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/admin/Planner.en.txt: LCG documentation link fixed.

	* doc/src/admin/Planner.cs.txt: LCG documentation link fixed.

	* doc/src/admin/News.en.txt: LCG documentation link fixed.

	* doc/src/admin/News.cs.txt: LCG documentation link fixed.

	* doc/src/admin/Content.en.txt: LCG documentation link fixed.

	* doc/src/admin/Content.cs.txt: LCG documentation link fixed.

2007-01-02  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.pl.po: New translations.

	* doc/src/user/accessibility.pl.txt: New file.

	* doc/src/user/navigation.pl.txt: New file.

	* doc/src/user/rss.pl.txt: New file.

2006-12-23  Tomas Cerha  <cerha@brailcom.org>

	* Makefile (install): Don't depend on `translations'.

2006-12-22  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py (News.Spec.fields): Use the `DateTime'
	type for `timestamp'.  Make `date' a virtual column with a
	computer.
	(News.Spec._rss_title): Export both values.
	(News.Spec._date): New method.
	(Planner.Spec.fields): Use the `Date' type for `start_date' and
	`end_date'.
	(Planner.Spec._date): Export dates with a weekday.
	(Users.Spec.fields): Use the `DateTime' type for the field
	`since'.

	* lib/wiking/module.py (WikingModule._datetime_formats): New
	method.
	(WikingModule._validate): Take `req' argument instead of just
	value dict.  Choose the correct date/time formats for validation
	according to current language.
	(WikingModule.insert, WikingModule.update): Pass `req' to
	`self._validate'.

	* lib/wiking/util.py (DateTime, Date): New classes.
	(translator): New function.

	* lib/wiking/handler.py (_translator): Method removed.
	(SiteHandler.handle): Use the `translator()' function instead of
	the method.

2006-12-21  Tomas Cerha  <cerha@brailcom.org>

	* doc/src/admin/Planner.en.txt: New file.

	* doc/src/admin/Planner.cs.txt: New file.

	* lib/wiking/modules.py (Modules.Spec.fields): New field `ord'.
	(Modules.Spec): Added `ord' to layout, columns and sorting.
	(Modules.menu): Sort menu by `ord'.
	(Content._variants): Return only published variants.
	(News.ListView._export_row): Export `content' only when not null.
	(Planner.Spec.fields): New fields `start_date' and `end_date'.
	`date' is just a virtual field computed from both dates.
	(Planner.Spec.sorting): Sort by `start_date'.
	(Planner.Spec._check_date, Planner.Spec._date) 
	(Planner.Spec.check): New methods.
	(Planner._condition): Use both dated in the condition.

	* lib/wiking/module.py (WikingModule._validate): Added support for
	the `check' constraint.

	* translations/wiking.cs.po: Updated.

	* lib/wiking/export.py (Exporter._login_ctrl): "Anonymous" ->
	"anonymous".

	* sql/wiking.sql (modules): New column `ord'.
	(planner): Column `date' renamed to `start_date'.  New column
	`end_date'.  Allow null values for `content'.

	* sql/init.sql: Insert modules with order numbers.

2006-12-20  Tomas Cerha  <cerha@brailcom.org>

	* sql/wiking.sql (planner): New table.

	* lib/wiking/util.py (Data.get_rows): New keyword argument
	`condition'.

	* lib/wiking/modules.py (Modules.Spec.columns): Use `name', not
	`title' in layout.
	(Content.Spec.fields): Define as a method.
	(News.Spec.fields): New field `rss_title'.
	(News.ListView._export_row): Don't use `news-' prefix for anchors.
	Use the first field as a key column.
	(News._link_provider): Don't use `news-' prefix for anchors.  Use
	`self._referer' as key column.
	(Planner): New class.

	* lib/wiking/module.py (WikingModule._spec_cache): New attribute.
	(WikingModule.spec): Use common cache
	`WikingModule._cpec_cache', not a class attribute.
	(WikingModule._default_prefill): New method.
	(WikingModule.add): Use it.
	(WikingModule._condition): New method.
	(WikingModule._rows): New method.
	(WikingModule._list): Use `self._rows'.  New argument `limit'.
	(WikingModule.panelize): Use `self._rows'.  Handle empty list.
	(WikingModule.rss): Raise `NotFound' when `self._RSS_TITLE_COLUMN'
	is not defined.  Use `PresentedRow' to support virtual columns.
	(WikingModule.list): Print RSS info when `self._RSS_TITLE_COLUMN'
	is defined, not `self._RSS_DESCR_COLUMN'.

2006-12-19  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py (Config.Spec.fields): New field `login_panel'.
	(News.Spec.fields): Set default timestamp in GMT.
	(Users.Spec.fields): Set type of `login' to Identifier.  New
	columns for session handling.
	(Users._user, Users._update, Users.user, Users.check_session) 
	(Users.save_session, Users.close_session): New methods.

	* lib/wiking/request.py (Request.get_cookie): Renamed to `cookie'.
	(WikingRequest._LOGIN_COOKIE, WikingRequest._SESSION_COOKIE)
	(WikingRequest._MAX_SESSION_KEY): New constants.
	(WikingRequest._init_params): `get_cookie()' -> `cookie'.  Process
	login form data.
	(WikingRequest.prefered_language): Docstring added.
	(WikingRequest.login_name): New method.
	(WikingRequest.user): New method.
	(WikingRequest.prefered_language): New method.
	(WikingRequest.check_auth): New method.

	* lib/wiking/util.py (Action.name): Renamed to `title()'.
	(Unauthorized): New class.
	(PanelItem.__init__): Take just `fields' argument.
	(PanelItem.export): Completely rewritten.
	(PanelItem._export_field): Method removed.
	(LoginDialog): New class.

	* lib/wiking/module.py (WikingModule.panelize): Use PresentedRow
	to support computed columns.  Pass simplified arguments to
	PanelItem constructor.
	

	* doc/src/user/navigation.en.txt: Updated.

	* doc/src/user/navigation.cs.txt: Updated.

	* lib/wiking/export.py (Exporter._page): New method.
	(Exporter._panels): Put both panel controls above the panels.  Add
	login panel if enabled.
	(Exporter._content): Cosmetic changes.
	(Exporter._wiking_bar): Cosmetic changes.

	* lib/wiking/handler.py (SiteHandler._translator): New method.
	(SiteHandler.handle): Handle also `Unauthorized' errors.  Use
	`self._translator'.
	(SiteHandler.handle): Set `config.user' for exporter.

	* resources/css/default.css:  Added styles for login form.

	* resources/css/panels.css: Added styles for login panel.

	* sql/wiking.sql (users): New columns for session handling and
	access rights.
	(config): New column `login_panel'.
	
2006-12-14  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py (Users.Spec.fields): Transformed to a
	method.

	* Makefile (doc): New target to generate HTML documentation.

	* README: Refer to the documentation.

	* doc/src/admin/Stylesheets.en.txt: New file.

	* doc/src/admin/admin.en.txt: New file.

	* doc/src/user/user.en.txt: New file.

	* doc/src/user/user.cs.txt: New file.

	* doc/src/user/_index.txt: New file.

	* doc/src/intro.en.txt: New file.

	* doc/src/index.en.txt: New file.

	* doc/src/fdl.en.txt: New file.

	* doc/src/_index.txt: New file.

2006-12-13  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py (Request.__init__): Call
	`self._init_uri()' to initialize the `uri' attribute.
	(Request._init_uri): New metohd.
	(WikingRequest._init_params): Use argument `setlang' for explicit
	language, not `lang' and `keep_language'.
	(WikingRequest._init_uri): New method.  Perform RSS redirection
	here transparently.

	* lib/wiking/module.py (WikingModule.rss): Don't care about the
	uri redirection here.  Use argument `setlang' for explicit
	language.

	* lib/wiking/handler.py (SiteHandler._action): Don't perform the
	RSS redirect here.

	* lib/wiking/export.py (Exporter._node_uri): Use argument
	`setlang' for explicit language, not `lang' and `keep_language'.

	* lib/wiking/util.py (Document.__init__): New keyword argument
	`sec_lang'.
	(Document.mknode): Pass `secondary_language' to the node
	constructor.
	(NotAcceptable.msg): Use argument `setlang' for explicit language,
	not `lang' and `keep_language'.

2006-12-12  Tomas Cerha  <cerha@brailcom.org>

	* doc/modules/Languages.cs.txt: Minor improvements.
	
	* doc/modules/Languages.en.txt: Minor improvements.

2006-12-11  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.cs.po: Updated.

	* translations/wiking.pl.po: Updated.

	* translations/wiking.es.po: Updated.

	* resources/css/default.css: Don't suppress underlining TOC links.

	* lib/wiking/modules.py (Mapping._link_provider): New argument
	`args'.  WMI uri changed to `_wmi'.
	(Config.theme): Removed commented theme caching.
	(News._link_provider): New argument `args'.

	* lib/wiking/module.py (_on_update): Method removed.
	(WikingModule._link_provider): New argument `args'.  Encode args
	into the final uri.  Use `_html.uri' for generating the uri.
	(WikingModule._list): New argument `lang'.  Use `lang' if given.
	(WikingModule.list): Doc uri changed to `_doc'.  Add link to RSS
	documentation.
	(WikingModule.update): Don't call `self._on_update()'.

	* lib/wiking/install.py (maybe_install): WMI uri changed to `_wmi'.

	* lib/wiking/handler.py (SiteHandler._resolve): Recognize the
	language suffix in the rss uri.
	(SiteHandler._doc): Search all subdirectories.  Don't create TOC
	automatically.
	(SiteHandler.handle): WMI uri changed to `_wmi'.  Doc uri changed
	to `_doc'.  Set the `doc' attribute of node config.  Support
	displaying documentation inline.

	* lib/wiking/export.py (Exporter._menu): Added accesskeys.
	(Exporter._content): Cosmetic change.
	(Exporter.ctrl): Changed WMI uri.  Also recognize the doc state.
	(Exporter._footer): Added `Accessibility Statement' link.

	* doc/modules/Mapping.cs.txt: Minor improvements.

	* doc/modules/Mapping.en.txt: Minor improvements.

	* doc/user/rss.cs.txt: New file.
	
	* doc/user/rss.en.txt: New file.

2006-12-10  Tomas Cerha  <cerha@brailcom.org>

	* doc/user/accessibility.cs.txt: New file.

	* doc/user/accessibility.en.txt: New file.

2006-12-05  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/modules.py: Define aliases for useful constants here,
	don't import them from pytis.extensions.
	(Themes.Spec.layout): New method.

	* lib/wiking/__init__.py (__version__): Don't import pytis.extensions.

	* lib/wiking/util.py (cmp_versions): New function.

	* Makefile: New file.

	* README: New file.

2006-12-04  Tomas Cerha  <cerha@brailcom.org>

	* doc/modules/Languages.cs.txt: Minor improvements.
	
	* doc/modules/Languages.en.txt: Minor improvements.

	* lib/wiking/modules.py
	(Modules.Spec._ModNameType._VALIDATION_MESSAGES): Konstanta zru¹ena.
	(Modules.Spec._ModNameType._VM_UNKNOWN_MODULE_MSG): Nová konstanta.
	(Mapping.Spec): Nastav maximální délku identifikátoru.

2006-12-01  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/request.py (Request.abs_uri): Guess protocol based on
	port number.

	* lib/wiking/export.py (Exporter._panels): Panel control labels
	changed.  Represent panel headings as divs, not h1 tags.
	(Exporter._panels): Improved handling of horizontal rules.

	* lib/wiking/configuration.py: 
	(Configuration._Option_https_ports): New option.

2006-11-30  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking-help.cs.po: File removed.

	* resources/css/default.css: Added styles for panel controls.

	* lib/wiking/modules.py (Panelizable): Class removed.
	(Modules, Mapping, Config, Languages, Themes, Stylesheets, Users) 
	(Panels, Titles, Content, News): Specifications rewritten using
	a class derived from `pytis.presentation.Specification'.

	* lib/wiking/module.py (WikingModule._TITLE)
	(WikingModule._SINGULAR_TITLE, WikingModule._FIELDS)
	(WikingModule._LAYOUT, WikingModule._LAYOUT_COLUMNS)
	(WikingModule._TABLE, WikingModule._KEY, WikingModule._SORTING)
	(WikingModule._CB_SPEC, WikingModule._COLUMNS)
	(WikingModule._ACTIONS):Constants removed.
	(WikingModule._PANEL_DEFAULT_COUNT, WikingModule._PANEL_FIELDS):
	New constants.
	(WikingModule.Object.__init__): New argument `view'.
	(WikingModule.Object.__init__, WikingModule.Object.prow): New
	method.
	(WikingModule.View.__init__): New argument `resolver'.
	(WikingModule.ListView.__init__): New argument `resolver'.
	(WikingModule.spec): New method.
	(WikingModule.data_spec, WikingModule.view_spec)
	(WikingModule.binding_spec, WikingModule.cb_spec): Methods
	removed.
	(WikingModule.__init__): New argument `resolver'.  Use
	`self.spec()' to get the `Specification' instance.  Get
	specifications form this instance.  Don't translate sorting spec.
	(WikingModule._form): New method.
	(WikingModule._help): Method removed.
	(WikingModule._document): Use `self._view.singular()' instead of
	`self._view.layout().caption()'.
	(WikingModule._list): Soppose `distinct()' to return a sequence of
	`Value' instances.
	(WikingModule.resolve): Pass `self._view' to the Object
	constructor.
	(WikingModule.panelize): New method.
	(WikingModule.list): Include just a link to documentation, not hte
	help text itself.
	(WikingModule.list, WikingModule.show, WikingModule.add) 
	(WikingModule.edit, WikingModule.remove): Use `self._form()'
	instead of constructing the form directly.
	(WikingModule.insert):  Pass `self._view' to the Object
	constructor.

	* lib/wiking/handler.py (Handler._site_handler): Pass a resolver
	instance to `SiteHandler' constructor.
	(SiteHandler.__init__): New argument `resolver'.
	(SiteHandler._module): Pass a resolver instance to module
	constructor.
	(SiteHandler._stylesheets): Accept `req' and `panels' arguments.
	(SiteHandler._doc): Also support wiking documentation in wiking
	doc directory.
	(SiteHandler.handle): Heavilly rewritten.  Improved documentation
	handling.  Pass options to the exporter in the node config.  Don't
	use `TRANSLATION_PATH', build it here.

	* lib/wiking/__init__.py (TRANSLATION_PATH): Constant removed.
	Don't import `help'.

	* lib/wiking/export.py (Exporter._is_wmi_node): Method removed.
	(Exporter._top): Always use `config.site_title'.
	(Exporter._panels): Hide panels if `config.show_panels' is False.
	Show panel show/hide controls.
	(Exporter.ctrls): Use `config.wmi' instead of `self._is_wmi_node()'.

	* lib/wiking/help.py: Module removed. 

	* lib/wiking/request.py (WikingRequest._PANELS_COOKIE): New class.
	(WikingRequest._init_params): Initialize `self._show_panels'.
	(WikingRequest.show_panels): New method.
	(WikingRequest.__init__): Method removed.

	* lib/wiking/util.py (split_camel_case, camel_case_to_lower):
	Functions removed.
	(HttpError.name): Use `split_camel_case' from Pytis.
	(__init__, available): Methods removed.
	(NotAcceptable.msg): Use `self.args' instead of `self._available'.
	(Field): Class removed - be just an alias to
	`pytis.presentation.FieldSpec'
	(WikingResolver.get): Use specification classes instead of modules
	directly.
	(DirectData): Class removed.

	* doc/modules/Titles.en.txt: New file.
	
	* doc/modules/Titles.cs.txt: New file.

	* doc/modules/Panels.en.txt: New file.

	* doc/modules/Panels.cs.txt: New file.

	* doc/modules/News.en.txt: New file.

	* doc/modules/News.cs.txt: New file.

	* doc/modules/Modules.en.txt: New file.

	* doc/modules/Modules.cs.txt: New file.

	* doc/modules/Mapping.en.txt: New file.

	* doc/modules/Mapping.cs.txt: New file.

	* doc/modules/Languages.en.txt: New file.

	* doc/modules/Languages.cs.txt: New file.

	* doc/modules/Content.en.txt: New file.

	* doc/modules/Content.cs.txt: New file.

2006-11-21  Tomas Cerha  <cerha@brailcom.org>

	* sql/init.sql: Operator fixed.

	* sql/wiking.sql: Typo fixed.

2006-11-13  Tomas Cerha  <cerha@brailcom.org>

	* defs/application.py: Fixed copyright and author information.

	* lib/wiking/*.py: Fixed copyright and author information.

	* COPYING: New file.

	* translations/wiking.*.po: Updated.

	* lib/wiking/export.py (Exporter._menu): Don't hardcode the label
	to be hidden.  Just mark it as a label.
	(Module): Added basic accesskey support.

	* resources/css/default.css: Minor cleaning.

2006-11-11  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.pl.po: Updated.

	* translations/wiking.es.po: New file.

	* lib/wiking/util.py (DocModule): Class removed.

	* lib/wiking/modules.py (Config.theme): Don't cache themes.

	* lib/wiking/handler.py (SiteHandler._doc): New method.
	(SiteHandler._resolve): Don't handle doc here.
	(SiteHandler.handle): Handle documentation requests differently.

	* lib/wiking/export.py (Exporter._node_uri): New method.
	(Exporter._is_current): Respect just the top level id.
	(Exporter._top): Add three divs to support several layers of
	backgrounf images.

ì006-11-08  Tomas Cerha  <cerha@brailcom.org>

	* translations/wiking.pl.po: Updated.

	* translations/wiking.cs.po: Updated.

	* translations/wiking-help.cs.po: Updated.
	
	* lib/wiking/util.py (DocModule.view): Search all the available
	language variants of the document and perform language selection
	according to the request.

	* lib/wiking/handler.py (Handler.__call__): Pass just an error
	message to `Request.error()'.

	* lib/wiking/request.py (Request.error): Accept just one argument
	- the error message.  Escape it befor printing.

2006-11-06  Tomas Cerha  <cerha@brailcom.org>

	* lib/wiking/module.py (WikingModule._document)
	(WikingModule._list): Use the new method
	`Request.prefered_language()'.

	* lib/wiking/modules.py (Modules.ModNameType): New type which only
	allows valid Module names.
	(Modules._FIELDS): Use it for `name'.

	* lib/wiking/handler.py (Handler.__call__): Some more information
	about the request added into the e-mail message.

	* lib/wiking/request.py (Request.error): Don't print the
	traceback, just a short error message.
	(WikingRequest.prefered_languages): New method.

2006-11-04  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: Syntax fixed.

	* translations/wiking.pl.po: New file

	* translations/wiking.cs.po: Updated.
