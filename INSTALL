= Installation instructions for Wiking CMS =

Dependencies:

  * apache >= 2.0 (prefork MPM!)
  * mod_python >= 3.2.10
  * postgresql >= (8.1 suggested)
  * python >= 2.3 (2.4 suggested)
  * lcg >= 0.3.4
  * pytis >= 0.1.0
  * pyPgSQL
  * mxDateTime

Multithreaded Apache MPM is currently not supported.  Since it is the default
in many distributions, please check and switch to prefork MPM to be able to run
Wiking.

When you have all the above installed, run "make install" in the package root
directory.  You need to have GNU make to be able to run the automatic
installation.  You may also wish to change some variables at the beginning of
the Makefile to customize the installation.

After installing Wiking, you must configure Apache to use Wiking for serving
your site.  This can be as simple as Adding two lines into your site's
VirtualHost section.  An example follows:

<VirtualHost *>
  ServerName www.yourdomain.com
  ScriptAliasMatch .* /usr/local/share/wiking/wiking.py
  PythonOption database www.yourdomain.com
</VirtualHost>

The ScriptAliasMatch line says Apache to handle all uris on given site by
wiking handler.  You should change the path if you installed Wiking to a
different location.  Please note, that the file 'wiking.py' does not actually
exist in the named directory, but that is ok.  The request will be redirected
to the Wiking handler.  The directory must exist, however (created by the
installation script).

The PythonOption line sets the name of the database which should be used by
Wiking to store content for given site.  The recommended practice is to use the
site name for the database name.

Once you have your site configuration ready, you may reload Apache and try
pointing your browser to the corresponding uri.  On the first try, the database
will not be initialized, but Wiking will detect that and guide you through the
database initialization process.

You can configure as many VirtualHosts as you want and serve them all using
Wiking, provided that there is a separate database for each virtual host.

== Additional options for Apache configuration ==

You may wish to redirect certain uris to ordinary files and directories.  This
can be simply done within the VirtualHost section.  Example:

  Alias /img/ /var/www/www.yourdomain.com/img

If you put this line prior to the ScriptAliasMatch line, Apache will handle all
requests within the /img/* by serving corresponding files in given directory.

Wiking currently does not support authentication (this is planned for the next
release), so you will need to use Apache authentication to restrict access to
your site and/or its management.

You will typically want to restrict access to the Wiking Management interface.
To do that, add the following to the end of your VirtualHost section:

  <Location /wmi>
      AuthType Basic
      AuthName "Wiking Management Interface"
      AuthUserFile /var/www/www.yoursite.com/passwd
      require valid-user
  </Location>

Of course, you need to have the corresponding authentication/authorization
modules enabled in your Apache and you will need to create and manage the
"passwd" file.  See Apache documentation for more information.  It is also
recommended to use password authentication in combination with an encripted
connection.
